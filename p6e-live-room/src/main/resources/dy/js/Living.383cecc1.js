"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[52],{15713:function(e,n,t){var r,o=t(63456);function i(){return i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}n.Z=function(e){return o.createElement("svg",i({width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("path",{d:"M16.317 18.731a1.393 1.393 0 01-1.97 0L9.29 13.675a1.393 1.393 0 010-1.97l.011-.011 5.045-5.045a1.393 1.393 0 011.97 1.97l-4.072 4.071 4.072 4.071a1.393 1.393 0 010 1.97z",fill:"#fff",opacity:.7})))}},38562:function(e,n,t){var r,o=t(63456);function i(){return i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}n.Z=function(e){return o.createElement("svg",i({width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("path",{d:"M9.684 18.731a1.393 1.393 0 001.97 0l5.055-5.056a1.393 1.393 0 000-1.97l-.011-.011-5.045-5.045a1.393 1.393 0 10-1.97 1.97l4.072 4.071-4.071 4.071a1.393 1.393 0 000 1.97z",fill:"#fff",opacity:.7})))}},39384:function(e,n,t){t.d(n,{b:function(){return o}});var r=t(12224),o=function(){return r.Z.get("https://".concat(window.location.host,"/aweme/v1/web/emoji/list"))}},10444:function(e,n,t){t.d(n,{$s:function(){return d},q7:function(){return m},JJ:function(){return _},TL:function(){return v},AE:function(){return p},VV:function(){return h},cJ:function(){return y},SR:function(){return E},lx:function(){return g},oX:function(){return b}});t(31806),t(16937),t(86723),t(76946),t(93558),t(7791),t(57113),t(18418),t(49915);var r=t(5345),o=t(16603),i=t(12224),a=t(84538);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}var f=t(86243).Pe(),d=function(){var e,n=(e=regeneratorRuntime.mark((function e(n,t){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("".concat(f,"/webcast/linkmic_audience/get_settings/"),{params:{room_id:n,sec_owner_id:t}});case 2:return r=e.sent,o=r.data,a=r.headers,e.abrupt("return",u(u({},o),{},{logId:a["x-tt-logid"]}));case 6:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(undefined)}))});return function(e,t){return n.apply(this,arguments)}}(),m=function(e){return a.Z.info("\u7533\u8bf7\u4e0a\u9ea6\u8bf7\u6c42"),i.Z.post("".concat(f,"/webcast/linkmic_audience/apply/"),o.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},_=function(e){return a.Z.info("\u4e0a\u9ea6\u8bf7\u6c42"),i.Z.post("".concat(f,"/webcast/linkmic_audience/join_channel/"),o.stringify({room_id:e}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},v=function(e){return a.Z.info("\u4e0b\u9ea6\u8bf7\u6c42"),i.Z.post("".concat(f,"/webcast/linkmic_audience/leave/"),o.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},p=function(e){return a.Z.info("\u53d6\u6d88\u9759\u97f3\u8bf7\u6c42"),i.Z.post("".concat(f,"/webcast/linkmic_audience/unsilence/"),o.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},h=function(e){return a.Z.info("\u9759\u97f3\u8bf7\u6c42"),i.Z.post("".concat(f,"/webcast/linkmic_audience/silence/"),o.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},y=function(e,n){return a.Z.info("\u5173\u95ed\u6444\u50cf\u5934"),i.Z.post("/webcast/linkmic_audience/update_link_type/apply/",o.stringify({room_id:e,to_user_id:n,link_type:r.Un.TYPE_AUDIO}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},E=function(e,n){return a.Z.info("\u5f00\u542f\u6444\u50cf\u5934 api \u8c03\u7528"),i.Z.post("/webcast/linkmic_audience/update_link_type/apply/",o.stringify({room_id:e,to_user_id:n,link_type:r.Un.TYPE_VIDEO}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},g=function(e){return a.Z.info("\u83b7\u53d6\u8fde\u9ea6\u914d\u7f6e\u8bf7\u6c42"),i.Z.get("".concat(f,"/webcast/linkmic_audience/list/v2/"),{params:e})},b=function(e){return a.Z.info("\u5207\u6362\u9ea6\u4f4d\u8bf7\u6c42"),i.Z.post("".concat(f,"/webcast/linkmic_audience/update_position/"),o.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},72877:function(e,n,t){t.d(n,{_:function(){return o},W:function(){return i}});var r=t(12224),o=function(e){var n=e.room_id_str,t=e.last_rtt,o=void 0===t?-1:t,i=e.internal_ext,a=void 0===i?"":i,s=e.cursor,u=void 0===s?0:s;return r.Z.get("/webcast/im/fetch/",{params:{room_id:n,resp_content_type:"protobuf",version_code:"9999",identity:"audience",live_id:1,aid:"6383",internal_ext:a,cursor:u,last_rtt:o,did_rule:3},responseType:"arraybuffer"})},i=function(e){var n=e.room_id_str,t=e.content;return r.Z.get("/webcast/room/chat/",{params:{room_id:n,content:t,type:0}})}},90888:function(e,n,t){t.d(n,{jL:function(){return i},el:function(){return a},Gq:function(){return s}});var r=t(12224),o=t(84333),i=function(e){return r.Z.get("/webcast/web/leave/",{params:{room_id:e,leave_source:"WEB_INITIATIVE"}})},a=function(e,n,t){return r.Z.get("/webcast/web/enter/",{params:{web_rid:e,room_id_str:n,enter_source:t===o.iT.SHARE_LINK?"web_share_reflow":""}})},s=function(e,n){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return r.Z.get("/webcast/web/similar_room_by_anchor/",{params:{web_rid:e,count:n,offset:t}})}},95650:function(e,n,t){t.d(n,{Z:function(){return y}});var r,o=t(63456),i="BQeahNdM",a="PGLtXUIV",s="k77Cm1W8",u="Ezr64ga0",c="pN1yw+Xo",l="ZcI6lTCr",f=t(25126),d=t(31121);function m(){return m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}var _=function(e){return o.createElement("svg",m({width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("path",{d:"M3.373 20.11v-2.502h-1.75v2.502a4.265 4.265 0 004.266 4.266h2.502v-1.75H5.89a2.519 2.519 0 01-2.516-2.516zM20.11 1.624h-2.502v1.75h2.502a2.519 2.519 0 012.516 2.516v2.5h1.75v-2.5a4.265 4.265 0 00-4.266-4.266zM3.373 5.89A2.518 2.518 0 015.89 3.374h2.502v-1.75H5.89A4.265 4.265 0 001.623 5.89v2.5h1.75v-2.5zm19.253 14.22a2.519 2.519 0 01-2.516 2.516h-2.502v1.75h2.502a4.265 4.265 0 004.266-4.266v-2.502h-1.75v2.502zM1.623 12.134h22.753v1.731H1.623v-1.732z",fill:"#fff"})))},v=t(56128),p=t.n(v),h=t(64503);var y=(0,d.Pi)((function(e){var n=e.className,t=e.qrcode,r=e.avatar;return(0,f.Z)(),(0,h.jsx)("div",{className:p()(i,n),style:{backgroundImage:'url("'.concat(r,'")')},children:(0,h.jsxs)("div",{className:a,children:[(0,h.jsx)("p",{className:u,children:"\u8be5\u5185\u5bb9\u4ec5\u9650\u624b\u673a\u89c2\u770b"}),(0,h.jsxs)("p",{className:c,children:[(0,h.jsx)(_,{className:l}),"\u6253\u5f00\u6296\u97f3\uff0c\u626b\u4e00\u626b"]}),(0,h.jsx)("img",{className:s,src:t,alt:""})]})})}))},92530:function(e,n,t){t.d(n,{Yq:function(){return f},ZP:function(){return _}});t(31806),t(16937),t(49915),t(63456);var r="-eg8VU0y",o="DXvqzS4f",i="OPE8io-h",a=t(71002),s=t(56128),u=t.n(s),c=t(64503);function l(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}var f,d=function(){return(0,c.jsxs)(c.Fragment,{children:["\u9700\u5148",(0,c.jsx)("span",{className:i,onClick:function(){var e,n,t,r;(0,a.ZP)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u53c2\u4e0e\u4e92\u52a8",success:(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.reload();case 1:case"end":return e.stop()}}),e)})),r=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(undefined)}))},function(){return r.apply(this,arguments)}),next:"https://".concat(null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.host),enterMethod:"livesdk_audience_live_message"})},children:"\u767b\u5f55"}),"\uff0c\u624d\u80fd\u5f00\u59cb\u804a\u5929"]})};!function(e){e[e.NO_LOGIN=0]="NO_LOGIN",e[e.MUTE=1]="MUTE",e[e.BLACK_HOUSE=2]="BLACK_HOUSE",e[e.END=3]="END",e[e.DEFAULT=4]="DEFAULT",e[e.KICK_OUT=5]="KICK_OUT",e[e.APP_ONLY=6]="APP_ONLY"}(f||(f={}));var m={0:(0,c.jsx)(d,{}),1:"\u4f60\u5df2\u88ab\u7981\u8a00",2:"\u4f60\u88ab\u5173\u8fdb\u5c0f\u9ed1\u5c4b\uff0c\u6682\u65f6\u65e0\u6cd5\u64cd\u4f5c",3:"\u76f4\u64ad\u5df2\u7ed3\u675f",4:"\u804a\u5929\u529f\u80fd\u4e0d\u53ef\u7528",5:"\u5df2\u9000\u51fa\u76f4\u64ad\u95f4\uff0c\u65e0\u6cd5\u8bc4\u8bba",6:"\u8be5\u5185\u5bb9\u4ec5\u9650\u624b\u673a\u89c2\u770b"},_=function(e){var n=e.type,t=e.className;return(0,c.jsx)("div",{className:u()(r,t),children:(0,c.jsx)("div",{className:o,children:m[n]})})}},94811:function(e,n,t){t.d(n,{Z:function(){return C}});t(97320),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(89748),t(16169),t(2501),t(16937),t(49915);var r=t(52727),o=t(35397),i=t(52881),a=t(84333),s=t(64969),u=t(25126),c=t(94227),l=t(5345),f=t(69725),d=t(42988),m=t(38387),_=t(31121),v=t(63456),p=t(64416),h=t(13928),y=t(79762),E="KHGf00Xt",g="_9DtHZQ8V",b="-J8dBtH5",N="RKALmHVl",S="SYdiOGfb",T=t(64503);function A(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}function I(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){A(i,r,o,a,s,"next",e)}function s(e){A(i,r,o,a,s,"throw",e)}a(undefined)}))}}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var C=(0,_.Pi)((function(e){var n=e.onConfirm,t=P(v.useState([]),2),_=t[0],A=t[1],O=P(v.useState([]),2),C=O[0],w=O[1],L=(0,f.n)().player,R=(0,u.Z)(),k=R.linkmicStore,j=k.selectedLinkMicDevices,x=k.setDevices,M=k.devicesModalMode,U=k.setShowDevicesModal,D=k.videoPermission,K=k.setSelectedPosition,B=k.linkRoomType,G=k.isAllowVideo,Z=k.isDefaultOpenVideo,F=k.setVideoDevice,V=k.setAudioDevice,Y=R.userStore.userInfo,W=(0,s.Z)(),H=W.apply,q=W.enableVideo,Q=W.unSilence,z=P(v.useState(j.audio),2),J=z[0],X=z[1],$=P(v.useState(j.video),2),ee=$[0],ne=$[1],te=v.useCallback((function(e){X(e)}),[]),re=v.useCallback((function(e){ne(e)}),[]),oe=v.useCallback((function(){if(M===c.xQ.APPLY){var e,t;if(!Y.id_str)return null==L||L.exitFullscreen(),(0,o.x)({success:function(){window.location.reload()},next:"https://".concat(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.host),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u8fde\u7ebf"}),void U(c.xQ.HIDE);if(!J)return d.F.info("\u65e0\u97f3\u6e90\u8f93\u5165\uff0c\u8fde\u7ebf\u5931\u8d25",null==L?void 0:L.root),void U(c.xQ.HIDE);var i=l.Un.TYPE_AUDIO;"video"===B&&(G&&Z&&ee?i=l.Un.TYPE_VIDEO:G&&Z&&!ee&&d.F.info("\u6682\u65e0\u9009\u4e2d\u89c6\u9891\u6e90\uff0c\u5c06\u4ee5\u8bed\u97f3\u65b9\u5f0f\u8fde\u9ea6",null==L?void 0:L.root)),x({audio:J,video:ee}),H(i)}else if(M===c.xQ.ENABLE_VIDEO){if(!ee)return d.F.info("\u6682\u65e0\u9009\u4e2d\u89c6\u9891\u6e90\uff0c\u65e0\u6cd5\u5f00\u542f\u89c6\u9891\u8fde\u9ea6",null==L?void 0:L.root),void U(c.xQ.HIDE);F(ee),q(),(0,a.jM)(r.eG.ON)}else if(M===c.xQ.ENABLE_AUDIO){if(!J)return d.F.info("\u6682\u65e0\u9009\u4e2d\u97f3\u9891\u6e90\uff0c\u65e0\u6cd5\u53d6\u6d88\u9759\u97f3",null==L?void 0:L.root),void U(c.xQ.HIDE);V(J),Q(),(0,a.CL)()}(0,a.yf)(),n&&n(),U(c.xQ.HIDE),K(undefined)}),[ee,J,x,n,U,H,K,G,Z,M,q,F,V,Q,Y,B,L]),ie=v.useCallback(I(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.PW)();case 2:n=e.sent,t=n.videoInputs,r=n.audioInputs,A(t),w(r);case 7:case"end":return e.stop()}}),e)}))),[]);v.useEffect((function(){M!==c.xQ.HIDE&&ie()}),[ie,M]);var ae=v.useCallback((function(){M===c.xQ.APPLY&&d.F.info("\u65e0\u97f3\u6e90\u8f93\u5165, \u8fde\u9ea6\u5931\u8d25",null==L?void 0:L.root),U(c.xQ.HIDE),K(undefined)}),[U,K,M,L]),se=v.useMemo((function(){return(M===c.xQ.ENABLE_VIDEO||M===c.xQ.APPLY&&Z)&&"video"===B&&G}),[M,B,G,Z]),ue=v.useMemo((function(){return M===c.xQ.APPLY||M===c.xQ.ENABLE_AUDIO}),[M]);return v.useEffect((function(){M!==c.xQ.HIDE&&(0,a.ri)()}),[M]),v.useEffect((function(){M===c.xQ.HIDE&&(X(undefined),ne(undefined))}),[M]),p.createPortal((0,T.jsx)(h.Z,{visible:M!==c.xQ.HIDE,onCancel:ae,children:(0,T.jsxs)("div",{className:E,children:[ue&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("h1",{className:g,children:"\u8bf7\u9009\u62e9\u9ea6\u514b\u98ce\u8f93\u5165"}),C.map((function(e){return(0,T.jsx)(y.Z,{className:b,selected:J===e.deviceId,value:e.deviceId,label:e.label,onClick:te},e.deviceId)}))]}),se&&(0,T.jsxs)(T.Fragment,{children:[M===c.xQ.APPLY&&(0,T.jsx)("hr",{className:N}),(0,T.jsx)("h1",{className:g,children:"\u8bf7\u9009\u62e9\u6444\u50cf\u5934\u8f93\u5165"}),(!D||0===_.length)&&(0,T.jsx)(y.Z,{value:-1,selected:!1,disable:!0,label:"\u672a\u68c0\u6d4b\u5230\u89c6\u9891\u8f93\u5165"}),D&&_.map((function(e){return(0,T.jsx)(y.Z,{selected:ee===e.deviceId,className:b,value:e.deviceId,label:e.label,onClick:re},e.deviceId)}))]}),(0,T.jsx)(m.zx,{className:S,onClick:oe,type:"primary",children:"\u786e\u5b9a"})]})}),L.root||document.body)}))},92728:function(e,n,t){t.d(n,{Z:function(){return nn}});t(89748),t(97320),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(16169),t(2501);var r=t(63456),o=t(56128),i=t.n(o),a=t(61108),s=t(50854),u=t(86782),c=(t(20841),t(86723),t(93558),t(7791),t(57113),t(18418),t(69268),t(11501),t(18420)),l=t(28025),f=t.n(l),d=t(84333),m=t(48570),_=t(75185),v=t(55746),p=t(23719),h=t(13454),y={isLight:"kr6blTFZ",dark:"G7G5u4I1",isDark:"CfY-XXk5",wrap:"YxbsqQyq",hasHover:"hW28FKOs",label:"k6z07kHH",level25:"TOZFlNoa",level30:"NGQwSllK",level35:"VhbfGLtm",level40:"AhMbhkKy",level45:"XLKMI6gZ",img:"rHJ12YoJ",isLock:"_0M7RPZt0"},E=t(64503),g=["gift","hasHover","hasLock","hasLabel","className"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){S(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function T(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var P=function(e){var n=e.gift,t=void 0===n?{}:n,o=e.hasHover,a=void 0===o||o,s=e.hasLock,u=void 0===s||s,c=e.hasLabel,l=void 0===c||c,f=e.className,d=I(e,g),m=t,b=m.icon,A=m.label,P=m.honorLevel,O=m.lockStatus,C=u&&Boolean(O),w="light"===_.Q.getItem(v.CookieKeys.Theme)?p:h,L=T((0,r.useState)(w),2),R=L[0],k=L[1],j=(0,r.useCallback)((function(){b&&k(b)}),[b]),x=(0,r.useCallback)((function(){k(w)}),[w]);return(0,E.jsxs)("div",N(N({className:i()(y.wrap,S({},y.hasHover,a),f)},d),{},{children:[l&&Boolean(A)&&(0,E.jsx)(E.Fragment,{children:P?(0,E.jsx)("div",{className:i()(y.label,y["level".concat(P)])}):(0,E.jsx)("div",{className:y.label,style:{backgroundImage:"url(".concat(A,")")}})}),(0,E.jsx)("img",{className:i()(y.img,S({},y.isLock,C)),src:R,onLoad:j,onError:x})]}))},O="AvocKpC7",C="WMLzSUnZ",w="E5rq1noK",L="w9A8svER",R="zLyfg9Ng",k="U8ZqYc5n",j="Qx58GBQJ",x="_2+0YLU8I",M="mhuqVFL9",U="hHdT8wso",D="Wl8J2Qhv",K="_8QPjEmWC",B="_0qG2lNEl",G="CvMVeB+1",Z="J9TOUcYT",F="_5+79mvDX",V="qCHbjKql",Y="wisqci6b",W="L9CBZoEu",H="B8+p73Ji",q="LEE4fuQ4",Q="bWrL0lFl",z="H1v6rpSM",J="U0pq0wi9",X=["gift","isVisible","giftSource","className","onSendError"];function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach((function(n){ne(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ne(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function te(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||oe(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,n){if(e){if("string"==typeof e)return ie(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ie(e,n):void 0}}function ie(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ae(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var se=function(e){var n,t=e.gift,o=void 0===t?{}:t,s=e.isVisible,u=e.giftSource,l=e.className,_=e.onSendError,v=ae(e,X),p=o,h=p.id,y=p.name,g=p.type,b=p.price,N=p.lockStatus,S=p.groupInfo,T=void 0===S?[]:S,A=Boolean(N),I=re((0,r.useState)(!1),2),$=I[0],oe=I[1],ie=re((0,r.useState)(!1),2),se=ie[0],ue=ie[1],ce=re((0,r.useState)(!1),2),le=ce[0],fe=ce[1],de=re((0,r.useState)(0),2),me=de[0],_e=de[1],ve=re((0,r.useState)(0),2),pe=ve[0],he=ve[1],ye=(0,r.useRef)(0),Ee=(0,r.useRef)(0),ge=(0,r.useRef)(),be=(0,r.useRef)(),Ne=(0,r.useRef)(),Se=(0,r.useRef)(),Te=(0,m.Z)().sendGift,Ae=(0,r.useMemo)((function(){return[{groupCount:1,groupText:""}].concat(te(T))}),[T]),Ie=(0,r.useMemo)((function(){return f()(Ae,"".concat(me,".groupCount"),1)}),[Ae,me]),Pe=function(e){ye.current=e,he(e)},Oe=function(){be.current&&clearTimeout(be.current),Ne.current&&clearInterval(Ne.current),Se.current&&clearInterval(Se.current)},Ce=function(){ue(!1),setTimeout((function(){ue(!0)}))},we=(0,r.useCallback)((function(){Oe(),oe(!1),ue(!1),_e(0),Pe(0),Ee.current=0}),[]),Le=(0,r.useCallback)((function(e){A||e<1||(Ee.current=Ee.current+e,Te({count:e,price:b,gift_id:h,is_first_combo:!$,giftSource:u}).catch((function(){_&&_()})))}),[u,h,A,b,$,_,Te]),Re=(0,r.useCallback)((function(){A||(oe(!0),Ce(),_e(0),Pe(Number(ye.current)+Number(Ie)),Le(Ie),ge.current&&clearTimeout(ge.current),ge.current=window.setTimeout((function(){we()}),5e3))}),[A,Ie,Le,we]),ke=(0,r.useCallback)((function(){Ne.current&&clearInterval(Ne.current),Se.current&&clearInterval(Se.current),Ne.current=window.setInterval((function(){fe(!0),Ce(),Pe(ye.current+Number(Ie))}),200),Se.current=window.setInterval((function(){Le(ye.current-Ee.current)}),1e3)}),[Ie,Le]),je=(0,r.useCallback)((function(){!A&&$&&(ge.current&&clearTimeout(ge.current),be.current&&clearTimeout(be.current),be.current=window.setTimeout((function(){ke()}),200))}),[A,$,ke]),xe=(0,r.useCallback)((function(){fe(!1),Oe(),Le(ye.current-Ee.current)}),[Le]),Me=(0,r.useCallback)((function(e){e!==me&&($&&we(),_e(e))}),[me,$,we]);return(0,r.useEffect)((function(){s?(0,d.cv)({gift_id:h,money_per_unit:b,show_source:u}):we()}),[s]),(0,r.useEffect)((function(){return we}),[]),(0,E.jsxs)("div",ee(ee({className:i()(O,l)},v),{},{children:[(0,E.jsxs)("div",{className:C,children:[(0,E.jsxs)("div",{className:w,children:[(0,E.jsx)(P,{className:L,gift:o,hasHover:!1,hasLock:!1,hasLabel:!1}),(0,E.jsxs)("div",{className:R,children:[(0,E.jsx)("div",{className:k,children:y}),A?(0,E.jsx)("div",{className:x,children:"\u8363\u8a89\u7b49\u7ea7\u6682\u672a\u8fbe\u6807"}):(0,E.jsx)(E.Fragment,{children:Boolean(b)&&(0,E.jsxs)("div",{className:j,children:[b,"\u6296\u5e01"]})})]})]}),(0,E.jsxs)("div",{className:M,children:[(0,E.jsx)(c.Z,{in:se,timeout:300,classNames:{enter:Q,enterActive:z,enterDone:J},children:(0,E.jsx)("div",{className:U,children:Boolean(pe)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{className:D,children:"x"}),(0,E.jsx)("span",{className:K,children:pe})]})})}),(0,E.jsx)("div",{className:i()(B,ne({},G,A)),onClick:Re,onMouseDown:je,onMouseUp:xe,children:$?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:i()(Z,(n={},ne(n,V,le),ne(n,F,se),n)),style:ee({},se&&{transitionDuration:"".concat(5e3,"ms")})}),(0,E.jsx)("div",{className:Y})]}):"\u8d60\u9001"})]})]}),g===a.o0.CHEAP&&Boolean(T.length)&&(0,E.jsx)("div",{className:W,children:Ae.map((function(e,n){return(0,E.jsx)("div",{className:i()(H,ne({},q,n===me)),onClick:function(){return Me(n)},children:e.groupCount},e.groupCount)}))})]}))},ue="yG+wPP9W",ce="guO0XuMS",le="_5-svOLqs",fe="wk-0sII8";function de(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return me(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return me(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var _e={adjustX:0,adjustY:0},ve=function(e){var n,t,o,a=e.gift,s=void 0===a?{}:a,c=e.popoverContainer,l=e.style,f=e.giftSource,d=e.className,m=s.price,_=de((0,r.useState)(!1),2),v=_[0],p=_[1],h=(0,r.useRef)(),y=(0,r.useRef)(),g=(0,r.useRef)(null),b=function(){clearTimeout(h.current),y.current=window.setTimeout((function(){p(!1)}),80)},N=function(){clearTimeout(y.current),h.current=window.setTimeout((function(){p(!0)}),80)},S=function(){b()};return(0,r.useEffect)((function(){v||(clearTimeout(h.current),clearTimeout(y.current))}),[v]),(0,E.jsx)("div",{className:i()(ue,d),style:l,ref:g,children:(0,E.jsx)(u.Z,{visible:v,scrollHide:!1,placement:"topRight",offset:10,zIndex:21,autoAdjustOverflowConfig:_e,getTooltipContainer:function(){return c||g.current},overlay:(0,E.jsx)(se,{className:fe,gift:s,isVisible:v,giftSource:f,onSendError:function(){b()},onMouseEnter:N,onMouseLeave:S}),children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(P,{gift:s,onMouseEnter:N,onMouseLeave:S}),Boolean(m)&&(0,E.jsx)("div",{className:i()(ce,(n={},t=le,o=m>99999,t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n)),children:(0,E.jsxs)("span",{children:[m,"\u6296\u5e01"]})})]})})})},pe=(0,r.memo)(ve),he=t(55639),ye="WWypU2IE";function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){be(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function be(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ne=(0,r.memo)((function(e){var n=e.data,t=void 0===n?[]:n,r=e.rowIndex,o=e.columnIndex,i=e.style,s=e.popoverContainer,u=f()(t,"".concat(4*Number(r)+Number(o)));return u?(0,E.jsx)(pe,{style:i,popoverContainer:s,giftSource:a._W.GIFT_PANEL,gift:u}):null})),Se=function(e){var n=e.giftPage,t=e.popoverContainer,r=e.className,o=n||{},u=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],n=arguments.length>1?arguments[1]:undefined,t=(0,s.fc)(e);return n===a.kQ.gift?t.slice(8):t}(o.giftList,o.pageType),c=Math.ceil(u.length/4);return(0,E.jsx)("div",{className:i()(ye,r),children:(0,E.jsx)(he.cd,{itemData:u,overscanRowCount:3,width:278,height:272,columnCount:4,columnWidth:function(){return 68},rowCount:c,rowHeight:function(e){return e===c-1?80:96},children:function(e){return(0,E.jsx)(Ne,ge(ge({},e),{},{popoverContainer:t}))}})})},Te=(0,r.memo)(Se),Ae="gQdAl2O8",Ie="AQcJiZ6n",Pe="zjBQ0tDX",Oe="aR5+jbDB",Ce="guX8xEAl",we="xQs4qyE3",Le="KyDnA6-m",Re="FHPWQOhc",ke="x99pjeNi",je="-yQXgoIZ",xe="dcJwdiYf";function Me(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ue(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return De(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return De(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Ke=function(e){var n=e.giftPages,t=void 0===n?[]:n,o=e.balance,a=void 0===o?0:o,s=e.panelVisible,u=void 0!==s&&s,c=e.isLogin,l=void 0!==c&&c,f=e.popoverContainer,m=e.className,_=Ue((0,r.useState)(0),2),v=_[0],p=_[1];return(0,r.useEffect)((function(){u&&(0,d.qN)()}),[u]),(0,E.jsxs)("div",{className:i()(Ae,m),children:[(0,E.jsxs)("div",{className:Ie,children:[(0,E.jsx)("div",{className:Pe,children:t.map((function(e,n){return(0,E.jsx)("div",{className:i()(Oe,Me({},Ce,n===v)),onClick:function(){return function(e){p(e)}(n)},children:e.pageName},e.pageType)}))}),l&&(0,E.jsxs)("div",{className:we,children:[(0,E.jsx)("span",{children:"\u4f59\u989d :"}),(0,E.jsx)("div",{className:Le}),(0,E.jsx)("span",{className:Re,children:a})]})]}),(0,E.jsx)("div",{className:ke,children:t.map((function(e,n){return(0,E.jsx)("div",{className:i()(je,Me({},xe,n===v)),children:(0,E.jsx)(Te,{giftPage:e,popoverContainer:f})},e.pageType)}))})]})},Be=(0,r.memo)(Ke),Ge="WGxbwrzj",Ze="d2tHpAyy",Fe="d0v4zhXI",Ve="O2hZI65B",Ye="vw6Pu--u",We="XEgtx2Ec",He="QbkJ5l10",qe="uynGxcFb",Qe="TUPqDBma",ze="e3uoQVgX";function Je(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Xe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var $e={adjustX:0,adjustY:0},en=function(e){var n,t,o,c=e.giftPages,l=void 0===c?[]:c,f=e.balance,d=void 0===f?0:f,_=e.isLogin,v=void 0!==_&&_,p=e.className,h=Je((0,r.useState)(!1),2),y=h[0],g=h[1],b=(0,r.useRef)(null),N=(0,m.Z)(),S=N.getBalance,T=N.getGifts,A=N.getEffects,I=(0,r.useMemo)((function(){var e=(0,s.pL)(l,[a.kQ.gift]);return(0,s.fc)(e).slice(0,8)}),[l]);return(0,E.jsxs)("div",{className:i()(Ge,p),ref:b,children:[(0,E.jsx)("div",{className:Ze,children:I.map((function(e){return(0,E.jsx)(pe,{className:Fe,giftSource:a._W.GIFT_BAR,popoverContainer:b.current,gift:e},e.id)}))}),(0,E.jsx)(u.Z,{trigger:"click",scrollHide:!1,placement:"topRight",offset:10,autoAdjustOverflowConfig:$e,getTooltipContainer:function(){return b.current},overlay:(0,E.jsx)(Be,{className:ze,giftPages:l,balance:d,panelVisible:y,isLogin:v,popoverContainer:b.current}),onVisibleChange:function(e){g(e),e?(S(),A()):T()},children:(0,E.jsx)("div",{className:i()(Ve,(n={},t=Ye,o=y,t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n)),children:(0,E.jsx)("div",{className:We})})}),(0,E.jsxs)("div",{className:He,children:[(0,E.jsx)("div",{className:qe}),(0,E.jsx)("div",{className:Qe,onClick:function(){v?(0,s.n_)():(0,s.m8)("\u767b\u5f55\u540e\u5373\u53ef\u5145\u503c","live_gift")},children:"\u5145\u503c"})]})]})},nn=(0,r.memo)(en)},50888:function(e,n,t){var r=t(98054),o=t.n(r),i=t(31806),a=t.n(i),s=t(16937),u=t.n(s),c=t(79342),l=t.n(c),f=t(8984),d=t.n(f),m=t(97320),_=t.n(m),v=t(45359),p=t.n(v),h=t(21646),y=t.n(h),E=t(13226),g=t.n(E),b=t(76946),N=t.n(b),S=t(22582),T=t.n(S),A=t(40485),I=t.n(A),P=t(89748),O=t.n(P),C=t(16169),w=t.n(C),L=t(2501),R=t.n(L),k=t(86723),j=t.n(k),x=t(93558),M=t.n(x),U=t(7791),D=t.n(U),K=t(57113),B=t.n(K),G=t(18418),Z=t.n(G),F=t(63456),V=t(92534),Y=t(14837),W=t(14152),H=t(94721),q=t(71686),Q=t(88300),z=t(30324),J=t(9711),X=t(64047),$=t(25126),ee=t(88727),ne=t(56573),te=t(78999),re=t(16902),oe=t(44858),ie=t(98545),ae=t(72400),se=t(33162),ue=t(90511),ce=t.n(ue),le=t(63317),fe=t(84333),de=t(39004),me=t(48349),_e=t(85754),ve=t(57073),pe=t(37033),he=t(56128),ye=t.n(he),Ee=t(87395),ge=t(10092),be=t(94227),Ne=t(25951),Se=t(64503);function Te(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Te(Object(t),!0).forEach((function(n){Ie(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Te(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ie(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Pe(e,n){return Re(e)||Le(e,n)||Ce(e,n)||Oe()}function Oe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ce(e,n){if(e){if("string"==typeof e)return we(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(e,n):void 0}}function we(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Le(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}function Re(e){if(Array.isArray(e))return e}var ke=(0,de.ZP)({resolved:{},chunkName:function(){return"DanmakuPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return Promise.all([t.e(665),t.e(768)]).then(t.bind(t,57522))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 57522}},{ssr:!1}),je=(0,de.ZP)({resolved:{},chunkName:function(){return"QualitySwitchPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(7).then(t.bind(t,81880))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 81880}},{ssr:!1}),xe=function(e){var n,t,r,o,i,a,s=e.onPlay,u=e.isLogPlay,c=e.onSend,l=e.playerCoverText,f=e.isPause,d=e.iframePlayerConf,m=(0,$.Z)(),_=m.userStore,v=_.userInfo,p=_.odin,h=m.roomStore.roomInfo,y=m.linkmicStore,E=y.linkRoomType,g=y.linkStatus,b=(y.linkMicLayout,(0,le.Z)()),N=(0,F.useRef)(),S=Pe((0,F.useState)(!1),2),T=S[0],A=S[1],I=F.useMemo((function(){return(0,ue.get)(h,"room.stream_url.live_core_sdk_data.pull_data.options.qualities",[]).map((function(e){return e.sdk_key}))}),[h]),P=F.useMemo((function(){return JSON.parse((0,ue.get)(h,"room.stream_url.live_core_sdk_data.pull_data.stream_data","null"))}),[h]),O=F.useMemo((function(){return(0,ue.get)(h,"room.stream_url.live_core_sdk_data.pull_data.options.default_quality.sdk_key","")}),[h]),C=(0,F.useMemo)((function(){if(P){var e,n=(null==P||null===(e=P.data[O])||void 0===e?void 0:e.main)||{};return(0,H.tq)()?(0,Y.uC)(n.hls||""):(0,Y.uC)(n.flv||"")}return""}),[P,O]);(0,F.useEffect)((function(){!u.current&&v.isReady&&((0,fe.Gh)({anchor_id:(0,ue.get)(h,"anchor.id_str",""),room_id:h.roomId||"",muted:N.current.getPlayer().muted,stream_type:b}),u.current=!0)}),[h,v,b,u]),(0,F.useEffect)((function(){return window.__IFRAME_PLAYER__=N.current,document.body.style.overflowX="hidden",function(){document.body.style.overflowX="auto"}}),[]);var w=(0,F.useMemo)((function(){return{enter_from_merge:"web_iframe"}}),[]),L=F.useRef(!_e.sk&&(0,me.rC)());return F.useEffect((function(){var e,n=null===(e=N.current)||void 0===e?void 0:e.getPlayer();n&&(g===be.cK.LINKED?(L.current=n.muted,n.muted=!0,n.plugins.play.hide(),n.plugins.volume.hide()):g===be.cK.NOT_LINK&&(n.muted=L.current,n.plugins.play.show(),n.plugins.volume.show()))}),[g]),(0,Se.jsxs)(q.N,{isPause:f,onPlay:s,className:ye()(V.Z.iframePlayer,"iframe-player"),volume:_e.sk?0:(0,me.Sv)(),url:C,closeVideoClick:!0,ref:N,onFullScreen:function(e){A(e)},icons:{loadingIcon:(0,se.renderToString)((0,Se.jsx)(W.g,{className:"live-player-loading",text:"\u89c6\u9891\u52a0\u8f7d\u4e2d"}))},children:["audio"===E&&(0,Se.jsx)(Ee.default,{}),"video"===E&&(0,Se.jsx)(ge.default,{}),l&&(0,Se.jsx)(Q.C,{cover:(0,ue.get)(h.anchor,"avatar_thumb.url_list[0]",""),children:l}),(0,Se.jsx)(z.p,Ae(Ae({},X.xo),{},{user_id:v.id_str,device_id:p.user_unique_id})),(0,Se.jsx)(ne.Z,{}),(0,Se.jsx)(ae.Z,{}),(0,Se.jsx)(oe.Z,{}),(0,Se.jsx)(Ne.b,{}),(0,Se.jsx)(ie.Z,{containerTagName:"xg-icon",position:"controlsLeft",index:1}),(0,Se.jsx)(re.Z,{containerClassName:V.Z.liveTitlePlugin,className:V.Z.liveTitlePluginContainer,position:"rootTop",title:null===(n=h.room)||void 0===n?void 0:n.title,userCount:(0,ve.jQ)(h.room)}),(0,Se.jsx)(J.G,{}),(null==d||null===(t=d.plugins)||void 0===t?void 0:t.includes("danmaku"))&&(0,Se.jsx)(ke,{on:!0,feature:!0}),(null==d||null===(r=d.plugins)||void 0===r?void 0:r.includes("follow"))&&(0,Se.jsx)(ee.Z,{isIframe:!0,containerClassName:V.Z.liveAnchorFollowPlugin,position:"rootTop"}),(null==d||null===(o=d.plugins)||void 0===o?void 0:o.includes("enter"))&&(0,Se.jsx)(pe.Z,{webRid:h.web_rid,roomTeaLogParams:w}),(null==d||null===(i=d.plugins)||void 0===i?void 0:i.includes("comment"))&&(0,Se.jsx)(te.Z,{position:"controlsRight",containerClassName:V.Z.liveCommentPlugin,isLogin:null==v?void 0:v.id_str,onSend:c,isIframe:!0,index:13}),(null==d||null===(a=d.plugins)||void 0===a?void 0:a.includes("bitrate"))&&P&&O&&(0,Se.jsx)(je,{defaultQuality:O,streamData:P,position:"controlsRight",qualityList:I,screenMode:T?fe.wq.FULL_SCREEN:fe.wq.NORMAL,index:12})]})};n.Z=xe},72128:function(e,n,t){t.d(n,{Z:function(){return E}});t(49915),t(59112),t(31806),t(16937);var r=t(52727),o=t(52881),i=t(84333),a=t(64969),s=t(25126),u=t(94227),c=t(5345),l=t(17696),f=t(42988),d=t(31121),m=t(63456),_="sZpMvEdg",v="Bkd1vKSx",p=t(64503);function h(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}function y(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){h(i,r,o,a,s,"next",e)}function s(e){h(i,r,o,a,s,"throw",e)}a(undefined)}))}}var E=(0,d.Pi)((function(){var e=m.useRef(null),n=(0,s.Z)().linkmicStore,t=n.linkMicSeats,d=n.selectedPosition,h=n.linkStatus,E=n.linkRoomType,g=n.selfLinkMicId,b=n.userPopupCoordinate,N=n.setUserPopupCoordinate,S=n.selectedLinkMicDevices,T=n.setShowDevicesModal,A=n.isAllowVideo,I=n.linkMicLayout,P=(0,a.Z)(),O=P.silence,C=P.unSilence,w=P.leave,L=P.enableVideo,R=P.disableVideo,k=P.switchMic,j=m.useMemo((function(){var e;return null===(e=t[d||""])||void 0===e?void 0:e.user}),[t,d]),x=m.useMemo((function(){return(null==j?void 0:j.silence_status)===c.Ai.STATUS_UNSILENCE}),[j]),M=m.useMemo((function(){return(null==j?void 0:j.link_type)===c.Un.TYPE_VIDEO}),[j]),U=m.useMemo((function(){return h===u.cK.LINKED}),[h]),D=m.useCallback(y(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=5;break}(0,i.se)(),O(),e.next=13;break;case 5:return e.next=7,(0,o.CP)();case 7:return n=e.sent,e.next=10,(0,o.PW)();case 10:t=e.sent,r=t.audioInputs.find((function(e){return e.deviceId===S.audio})),n&&S.audio&&r?((0,i.CL)(),C()):T(u.xQ.ENABLE_AUDIO);case 13:case"end":return e.stop()}}),e)}))),[O,x,C,S,T]),K=m.useCallback(y(regeneratorRuntime.mark((function e(){var n,t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=5;break}R(),(0,i.jM)(r.eG.OFF),e.next=16;break;case 5:if(A){e.next=8;break}return f.F.info("\u4e3b\u64ad\u5173\u95ed\u4e86\u89c6\u9891\u8fde\u7ebf\u529f\u80fd"),e.abrupt("return");case 8:return e.next=10,(0,o.jE)();case 10:return n=e.sent,e.next=13,(0,o.PW)();case 13:t=e.sent,a=t.videoInputs.find((function(e){return e.deviceId===S.video})),S.video&&n&&a?(L(),(0,i.jM)(r.eG.ON)):T(u.xQ.ENABLE_VIDEO);case 16:case"end":return e.stop()}}),e)}))),[L,M,R,S,T,A]),B=m.useCallback((function(){(0,i.c3)(),w(r.JW.SEAT,r._o.AUDIENCE)}),[w]),G=m.useMemo((function(){return j&&(null==j?void 0:j.linkmic_id_str)===g}),[g,j]),Z=m.useMemo((function(){return U&&!j&&d!==undefined}),[j,d,U]);m.useEffect((function(){var n=function(n){n.target!==e.current&&N(undefined)};return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[N]);var F=m.useMemo((function(){return I===l.y.AUDIO_1V8||I===l.y.VIDEO_1V6?d||0:(d||0)+1}),[I,d]),V=m.useCallback((function(){k().then((function(){f.F.info("\u6210\u529f\u5207\u6362\u81f3".concat(F,"\u53f7\u9ea6\u4f4d"))}))}),[F,k]);return b?(0,p.jsxs)("div",{ref:e,className:_,style:{top:b.y,left:b.x},children:[G&&U&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("span",{className:v,onClick:D,children:[x?"\u5173\u95ed":"\u6253\u5f00","\u58f0\u97f3"]}),"video"===E&&(0,p.jsxs)("span",{onClick:K,className:v,children:[M?"\u5173\u95ed":"\u6253\u5f00","\u6444\u50cf\u5934"]}),(0,p.jsx)("span",{className:v,onClick:B,children:"\u65ad\u5f00\u8fde\u7ebf"})]}),Z&&(0,p.jsxs)("span",{className:v,onClick:V,children:["\u5207\u6362\u81f3",F,"\u53f7\u9ea6\u4f4d"]})]}):null}))},6472:function(e,n,t){t.d(n,{Z:function(){return b}});t(97320),t(89748),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(16169),t(2501);var r=t(16763),o=t(63456),i=t(47447),a=t(31121),s="szyxtjfl",u="oSu9Aw19",c="H0HoUlYV",l="tXSSbZVD",f="vCRt-Z79",d="ik1ogBQb",m=t(84333),_=t(90511),v=t(31602),p=t(25126),h=t(88873),y=t(64503);function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var b=(0,a.Pi)((function(e){var n=e.rooms,t=void 0===n?[]:n,a=function(){var e=E(o.useState(3),2),n=e[0],t=e[1],r=o.useCallback((function(e){return e<=1140?2:3}),[]),i=o.useCallback((function(){var e=r(window.innerWidth);t(e)}),[r]);return o.useEffect((function(){return i(),window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[i]),{columnsNum:n}}(),g=a.columnsNum,b=E(o.useState(t),2),N=b[0],S=b[1],T=(0,r.I)(),A=T.hoverId,I=T.onCardMouseEnter,P=T.onCardMouseLeave,O=(0,p.Z)(),C=O.userStore.userInfo,w=O.roomStore.roomInfo,L=(0,v.Z)(),R=L.renderLivePlayer,k=L.onRoomBlur,j=L.onRoomFocus,x=L.isPlay;o.useEffect((function(){S(t)}),[t]);var M=o.useCallback((function(){P(),k&&k()}),[k,P]),U=o.useCallback((function(e){var n=(0,h.v6)({id_str:(0,_.get)(e,"room.id_str",""),type:1}),t=(0,h.v6)((0,_.get)(w,"partition_road_map.partition")),r=(0,m.bz)(n,t),o=(0,m.bz)(n,t),i=m.iT.WEB_CLOSED_PAGE;return{anchor_id:(0,_.get)(e,"room.owner.id_str",""),room_id:(0,_.get)(e,"room.id_str",""),web_live_page:r,web_live_tab:o,enter_from_merge:i,enter_method:m.QX.CARD,game_name:(0,_.get)(e,"tag_name",""),live_type:"game",is_aweme_tied:C.id_str?1:0,game_live_source:"game_web",more_detail:"",request_id:e.requestId}}),[C,w]),D=o.useCallback((function(e){return function(){var n=U(e);(0,m.JW)(n)}}),[U]),K=o.useCallback((function(e){return function(){var n=U(e);(0,m.bi)(n),M()}}),[M,U]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:s,children:[(0,y.jsx)("span",{className:c}),(0,y.jsx)("div",{className:u,children:"\u76f4\u64ad\u5df2\u7ed3\u675f\uff0c\u731c\u4f60\u559c\u6b22"}),(0,y.jsx)("span",{className:l})]}),(0,y.jsxs)("div",{className:f,children:[R(),N.slice(0,g).map((function(e){return(0,y.jsx)(i.Z,{data:e,className:d,hideCover:x,hideTag:!1,focus:e.room.id_str===A,onCardFocus:j,onMouseEnter:function(){return I(e.room.id_str)},onMouseLeave:M,onClick:K(e),target:"_self",isRecommendOnEnd:!0,onLog:D(e),logParams:(0,_.pick)(U(e),["enter_from_merge","enter_method","game_name","ug_source","web_live_page","web_live_tab","more_detail"])},e.room.id_str)}))]})]})}))},10002:function(e,n,t){var r=t(86723),o=t.n(r),i=t(76946),a=t.n(i),s=t(22582),u=t.n(s),c=t(40485),l=t.n(c),f=t(89748),d=t.n(f),m=t(16169),_=t.n(m),v=t(2501),p=t.n(v),h=t(93558),y=t.n(h),E=t(7791),g=t.n(E),b=t(57113),N=t.n(b),S=t(18418),T=t.n(S),A=t(98054),I=t.n(A),P=t(31806),O=t.n(P),C=t(16937),w=t.n(C),L=t(79342),R=t.n(L),k=t(8984),j=t.n(k),x=t(97320),M=t.n(x),U=t(45359),D=t.n(U),K=t(4583),B=t(64047),G=t(20350),Z=t(15713),F=t(38562),V=t(14837),Y=t(57073),W=t(84333),H=t(48349),q=t(6472),Q=t(85754),z=t(25126),J=t(63317),X=t(56573),$=t(78999),ee=t(88727),ne=t(25951),te=t(44858),re=t(98545),oe=t(3587),ie=t(16902),ae=t(72400),se=t(94227),ue=t(94721),ce=t(71686),le=t(88300),fe=t(30324),de=t(9711),me=t(44732),_e=t(71002),ve=t(14152),pe=t(39004),he=t(56128),ye=t.n(he),Ee=t(90511),ge=t.n(Ee),be=t(31121),Ne=t(63456),Se=t(33162),Te=t(49773),Ae=t(64503),Ie=["onPlay","isTheaterOn","onTheaterSwitch","isLogPlay","onSend","onArrowClick","isFoldChatroom","isDanmakuFeatureOn","playerCoverText","isPause","recommendOnEndRoom"];function Pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pe(Object(t),!0).forEach((function(n){Ce(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ce(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function we(e,n){return xe(e)||je(e,n)||Re(e,n)||Le()}function Le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Re(e,n){if(e){if("string"==typeof e)return ke(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ke(e,n):void 0}}function ke(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function je(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}function xe(e){if(Array.isArray(e))return e}function Me(e,n){if(null==e)return{};var t,r,o=Ue(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function Ue(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}var De=(0,pe.ZP)({resolved:{},chunkName:function(){return"DanmakuPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return Promise.all([t.e(665),t.e(768)]).then(t.bind(t,57522))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 57522}},{ssr:!1}),Ke=(0,pe.ZP)({resolved:{},chunkName:function(){return"AudioRoomPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return Promise.resolve().then(t.bind(t,87395))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 87395}},{ssr:!1}),Be=(0,pe.ZP)({resolved:{},chunkName:function(){return"RTCLayerPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(697).then(t.bind(t,44791))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 44791}},{ssr:!1}),Ge=(0,pe.ZP)({resolved:{},chunkName:function(){return"VideoRoomPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return Promise.resolve().then(t.bind(t,10092))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 10092}},{ssr:!1}),Ze=(0,pe.ZP)({resolved:{},chunkName:function(){return"QualitySwitchPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(7).then(t.bind(t,81880))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 81880}},{ssr:!1}),Fe=(0,pe.ZP)({resolved:{},chunkName:function(){return"GiftBarPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(275).then(t.bind(t,10881))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 10881}},{ssr:!1}),Ve=(0,pe.ZP)({resolved:{},chunkName:function(){return"GiftSwitchPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(78).then(t.bind(t,71259))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 71259}},{ssr:!1}),Ye=(0,pe.ZP)({resolved:{},chunkName:function(){return"EffectSwitchPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(420).then(t.bind(t,8406))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 8406}},{ssr:!1}),We=(0,pe.ZP)({resolved:{},chunkName:function(){return"GiftTrayPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return t.e(722).then(t.bind(t,97895))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 97895}},{ssr:!1}),He=(0,pe.ZP)({resolved:{},chunkName:function(){return"GiftEffectPlugin"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return Promise.all([t.e(892),t.e(577),t.e(365)]).then(t.bind(t,81890))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 81890}},{ssr:!1}),qe=function(e){var n,t,r,o,i=e.onPlay,a=e.isTheaterOn,s=e.onTheaterSwitch,u=e.isLogPlay,c=e.onSend,l=e.onArrowClick,f=e.isFoldChatroom,d=e.isDanmakuFeatureOn,m=e.playerCoverText,_=e.isPause,v=e.recommendOnEndRoom,p=Me(e,Ie),h=(0,z.Z)(),y=h.userStore,E=y.userInfo,g=y.odin,b=h.roomStore,N=b.roomInfo,S=b.setLiveStatus,T=h.linkmicStore,A=T.linkRoomType,I=T.linkStatus,P=(T.linkMicLayout,h.giftStore),O=P.giftStatus,C=P.supportedGiftPages,w=P.giftMessages,L=P.balance,R=P.effectSwitchStatus,k=P.setEffectSwitchStatus,j=(0,J.Z)(),x=(0,Ne.useRef)(),M=we((0,Ne.useState)(!1),2),U=M[0],D=M[1],pe=we((0,Ne.useState)(!1),2),he=pe[0],ge=pe[1],be=we((0,Ne.useState)(!1),2),Pe=be[0],Le=be[1],Re=Ne.useMemo((function(){return he?W.wq.FULL_SCREEN:a?W.wq.THEATER:W.wq.NORMAL}),[he,a]),ke=Ne.useMemo((function(){return(0,Ee.get)(N,"room.stream_url.live_core_sdk_data.pull_data.options.qualities",[]).map((function(e){return e.sdk_key}))}),[N]),je=Ne.useMemo((function(){return JSON.parse((0,Ee.get)(N,"room.stream_url.live_core_sdk_data.pull_data.stream_data","null"))}),[N]),xe=Ne.useMemo((function(){return(0,Ee.get)(N,"room.stream_url.live_core_sdk_data.pull_data.options.default_quality.sdk_key","")}),[N]),Ue=(0,Ne.useMemo)((function(){if(je){var e,n=(null==je||null===(e=je.data[xe])||void 0===e?void 0:e.main)||{};return(0,ue.tq)()?(0,V.uC)(n.hls||""):(0,V.uC)(n.flv||"")}return""}),[je,xe]),qe=Ne.useCallback((function(){if(!E.id_str&&x.current){var e,n,t=x.current.getPlayer();null==t||t.exitFullscreen(),(0,_e.ZP)({success:window.location.reload,next:"https://".concat(null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.host)})}}),[E]);(0,Ne.useEffect)((function(){!u.current&&E.isReady&&((0,W.Gh)({anchor_id:(0,Ee.get)(N,"anchor.id_str",""),room_id:N.roomId||"",muted:x.current.getPlayer().muted,stream_type:j}),u.current=!0)}),[N,E,j,u]),(0,Ne.useEffect)((function(){window.__LIVING_PLAYER__=x.current}),[]),(0,Ne.useEffect)((function(){Re!==W.wq.THEATER||f?Re===W.wq.THEATER&&f?S(G.zZ.WEB_FULL_NO_COMMENT):Re===W.wq.FULL_SCREEN?S(G.zZ.FULL):S(G.zZ.NORMAL):S(G.zZ.WEB_FULL)}),[Re,f]);var Qe=Ne.useRef(!Q.sk&&(0,H.rC)());return Ne.useEffect((function(){var e,n=null===(e=x.current)||void 0===e?void 0:e.getPlayer();n&&(I===se.cK.LINKED?(Qe.current=n.muted,n.muted=!0,n.plugins.play.hide(),n.plugins.volume.hide()):I===se.cK.NOT_LINK&&(n.muted=Qe.current,n.plugins.play.show(),n.plugins.volume.show()))}),[I]),(0,Ae.jsx)("div",{className:ye()(Ce({},Te.Z.hasGiftBar,O&&he&&Pe)),children:(0,Ae.jsxs)(ce.N,Oe(Oe({},p),{},{onFocus:function(){D(!0)},onBlur:function(){D(!1)},isPause:_,onPlay:i,className:ye()(Te.Z.livingPlayer,"living_player"),volume:Q.sk?0:(0,H.Sv)(),url:Ue,ref:x,onFullScreen:function(e){ge(e),s&&s(!1)},icons:{loadingIcon:(0,Se.renderToString)((0,Ae.jsx)(ve.g,{className:"live-player-loading",text:"\u89c6\u9891\u52a0\u8f7d\u4e2d"}))},children:[a&&U&&(0,Ae.jsx)("div",{className:Te.Z.toggle_chatroom,onClick:l,children:f?(0,Ae.jsx)(Z.Z,{}):(0,Ae.jsx)(F.Z,{})}),m&&!(m===K.k.ANCHOR_BAN&&A)&&(0,Ae.jsxs)(le.C,{cover:(0,Ee.get)(N.anchor,"avatar_thumb.url_list[0]",""),children:[0===v.length&&m,0!==v.length&&(0,Ae.jsx)(q.Z,{rooms:v,target:"_self"})]}),(0,Ae.jsx)(fe.p,Oe(Oe({},B.xo),{},{user_id:E.id_str,device_id:g.user_unique_id})),(0,Ae.jsx)(ne.b,{}),(0,Ae.jsx)(X.Z,{}),(0,Ae.jsx)(ae.Z,{}),(0,Ae.jsx)(De,{on:!0,feature:d}),(0,Ae.jsx)(te.Z,{}),A&&(0,Ae.jsx)(Be,{isTheaterOn:a}),"audio"===A&&(0,Ae.jsx)(Ke,{isTheaterOn:a}),"video"===A&&(0,Ae.jsx)(Ge,{isTheaterOn:a}),I!==se.cK.LINKED&&(0,Ae.jsx)(re.Z,{containerTagName:"xg-icon",position:"controlsLeft",index:1}),(0,Ae.jsx)(oe.Z,{on:a,onSwitch:function(e){var n=x.current.getPlayer();n.fullscreen&&n.plugins.fullscreen.changeFullScreen(),(0,W.ij)(!e),s&&s(e)},containerTagName:"xg-icon",position:"controlsRight",index:.5}),I!==se.cK.LINKED&&je&&xe&&(0,Ae.jsx)(Ze,{defaultQuality:xe,streamData:je,disable:!E.id_str,onQualitySelect:qe,position:"controlsRight",qualityList:ke,screenMode:Re,index:12}),(he||a)&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(ie.Z,{containerClassName:Te.Z.liveTitlePlugin,className:Te.Z.liveTitlePluginContainer,position:"rootTop",title:null===(n=N.room)||void 0===n?void 0:n.title,userCount:(0,Y.jQ)(N.room)}),(0,Ae.jsx)(ee.Z,{containerClassName:Te.Z.liveAnchorFollowPlugin,position:"rootTop"})]}),he&&(0,Ae.jsx)($.Z,{position:"controlsRight",containerClassName:Te.Z.liveCommentPlugin,isLogin:null==E?void 0:E.id_str,onSend:c,index:13}),(0,Ae.jsx)(de.G,{}),(0,Ae.jsx)(me.g,{}),O&&(0,Ae.jsxs)(Ae.Fragment,{children:[he&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(Ve,{containerTagName:"xg-icon",position:"controlsRight",index:14,onSwitch:Le}),(0,Ae.jsx)(Fe,{container:null===(t=x.current)||void 0===t||null===(r=t.getPlayer())||void 0===r||null===(o=r.controls)||void 0===o?void 0:o.root,giftPages:C,balance:L,isLogin:Boolean((0,Ee.get)(E,"id_str"))})]}),(0,Ae.jsx)(Ye,{containerTagName:"xg-icon",position:"controlsRight",index:1,onSwitch:k}),(0,Ae.jsx)(We,{effectSwitchStatus:R,giftMessages:w}),(0,Ae.jsx)(He,{effectSwitchStatus:R,giftMessages:w})]})]}))})};n.Z=(0,be.Pi)(qe)},86795:function(e,n,t){t.d(n,{Z:function(){return fe}});t(11501),t(45359),t(69268),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(89748),t(16169),t(2501);var r,o=t(32385),i=t(20350),a=t(52727),s=t(69431),u=t(63456);function c(){return c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(this,arguments)}var l,f=function(e){return u.createElement("svg",c({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.811 4.615c0 1.485-1.241 2.692-2.777 2.71h-.067C6.431 7.306 5.189 6.1 5.189 4.614v-.904C5.19 2.214 6.45 1 8 1c1.552 0 2.811 1.214 2.811 2.711v.904zm-7.65 4.979C4.33 9.037 6.675 8.73 8 8.73c1.327 0 3.676.307 4.846.868.679.38 1.155 1.23 1.155 2.225v.572c0 .738-.39 1.357-.928 1.556-1.284.366-3.698.563-5.071.563-1.375 0-3.79-.201-5.078-.565C2.391 13.748 2 13.13 2 12.393v-.572c0-.997.478-1.85 1.162-2.227z",fill:"#2F3035"})))};function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},d.apply(this,arguments)}var m,_=function(e){return u.createElement("svg",d({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=u.createElement("path",{d:"M8.667 12.145a1.333 1.333 0 11-2.667 0 1.333 1.333 0 012.667 0zM13.333 12.145a1.333 1.333 0 11-2.666 0 1.333 1.333 0 012.666 0zM16.667 13.479a1.333 1.333 0 100-2.667 1.333 1.333 0 000 2.667z",fill:"#2F3035",fillOpacity:.4})))};function v(){return v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v.apply(this,arguments)}var p,h=function(e){return u.createElement("svg",v({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.326 10.829a2.497 2.497 0 01-2.497 2.497H9.28v-1.343h1.548c.636 0 1.154-.518 1.154-1.154V9.782a.5.5 0 01.5-.5h.343a.5.5 0 01.5.5v1.047zm-8.607 2.497H3.17a2.497 2.497 0 01-2.497-2.497V9.782a.5.5 0 01.5-.5h.343a.5.5 0 01.5.5v1.047c0 .636.518 1.154 1.154 1.154H4.72v1.343zm8.607-6.16a.5.5 0 01-.5.5H1.174a.5.5 0 01-.5-.5v-.332a.5.5 0 01.5-.5h11.652a.5.5 0 01.5.5v.332zm0-2.948a.5.5 0 01-.5.5h-.343a.5.5 0 01-.5-.5V3.171c0-.636-.518-1.154-1.154-1.154H9.78a.5.5 0 01-.5-.5v-.343a.5.5 0 01.5-.5h1.048a2.497 2.497 0 012.497 2.497v1.047zm-11.31 0a.5.5 0 01-.5.5h-.342a.5.5 0 01-.5-.5V3.171A2.497 2.497 0 013.171.674H4.22a.5.5 0 01.5.5v.343a.5.5 0 01-.5.5H3.17c-.636 0-1.154.518-1.154 1.154v1.047z",fill:"#2F3035"})))},y=t(88873),E=t(84333),g=(t(93558),t(97320),t(56128)),b=t.n(g),N="zUgQDxBS",S="_9nd4irLN",T="eoydxe4P";function A(){return A=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},A.apply(this,arguments)}var I=function(e){return u.createElement("svg",A({width:6,height:8,viewBox:"0 0 6 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),p||(p=u.createElement("path",{d:"M1.359.17C.804-.24 0 .14 0 .813v6.375c0 .672.804 1.053 1.359.642L5.67 4.643a.792.792 0 000-1.286L1.359.17z",fill:"#4F5168"})))},P=t(64503);function O(e){var n=e.links,t=e.className,r=n.filter((function(e){return Boolean(e.label)}));return(0,P.jsx)("div",{className:b()(N,t),children:r.map((function(e,n){var t=e.to,o=e.label,i=e.newTab;return(0,P.jsxs)("span",{className:T,children:[(0,P.jsx)("a",{href:t,target:i?"_blank":undefined,rel:"noreferrer",children:o}),n<r.length-1&&(0,P.jsx)(I,{className:S})]},t)}))})}var C=t(42005),w=t(41756),L=t(85754),R=t(64969),k=t(25126),j=t(94227),x=t(34361),M=t(38387),U=t(90511),D=t(31121),K="H+geqUnF",B="-l--nVCt",G="fOrXLTKR",Z="CSsy5B4o",F="oPE8Cni9",V="Ju7i0i9s",Y="td9sqpgC",W="Vzes401b",H="zyiJ-R0C",q="rgdB9Lb0",Q="_5FPV4ZZ+",z="FGZ30onV",J="VPz4-306",X="_5AZvPWVz",$="KlDwikHT",ee="vpme-gty",ne="kGa0-PTr",te="vEQOWS5q",re="itRc5R8s",oe="_6y0HyjD1",ie="_2ZWxpgKz",ae="sD2Ku9zP",se="+xLH9K-N",ue=t(50641);function ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return le(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return le(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var fe=(0,D.Pi)((function(){var e,n,t=(0,k.Z)(),r=t.roomStore,c=r.roomInfo,l=r.setFollowStatus,d=t.linkmicStore,m=d.linkStatus,v=d.setShowDevicesModal,p=d.setSelectedPosition,g=d.setApplySource,N=d.setIsFansGuide,S=d.linkMicConfig,T=d.linkRoomType,A=d.isPlayModeNotSupport,I=t.userStore.userInfo,D=(0,U.get)(c,"roomId",""),le=(0,u.useMemo)((function(){var e;return Number(null===(e=c.room)||void 0===e?void 0:e.status_str)===i.LV.END}),[null===(e=c.room)||void 0===e?void 0:e.status_str]),fe=ce((0,u.useState)(!1),2),de=fe[0],me=fe[1],_e=ce((0,u.useState)(!1),2),ve=_e[0],pe=_e[1],he=(0,U.debounce)((function(){return me(!1)}),100),ye=(0,U.debounce)((function(){return pe(!1)}),100),Ee=(0,u.useMemo)((function(){return[{label:(0,U.get)(c,"partition_road_map.partition.title"),to:(0,y.HO)((0,U.get)(c,"partition_road_map.partition")),newTab:!0},{label:(0,U.get)(c,"partition_road_map.sub_partition.partition.title"),to:(0,y.HO)((0,U.get)(c,"partition_road_map.partition"),(0,U.get)(c,"partition_road_map.sub_partition.partition")),newTab:!0}]}),[c]);(0,u.useEffect)((function(){ve&&(0,E.q3)()}),[ve]);var ge=(0,R.Z)().leave,be=u.useCallback((function(){g(a.JW.BUTTON),m===j.cK.LINKED||m===j.cK.LINKING?((0,E.c3)(),ge(a.JW.BUTTON,a._o.AUDIENCE)):m===j.cK.NOT_LINK&&(p(undefined),v(j.xQ.APPLY))}),[v,ge,m,p,g]),Ne=(null===(n=c.room)||void 0===n?void 0:n.live_room_mode)===i.ke.MEDIA,Se=u.useCallback((function(e){l(e),e===s.E.FOLLOWED&&(S.big_party_accept_need_verified||S.audio_chat_accept_need_verified)&&N(!0)}),[l,S,N]);return(0,P.jsxs)("div",{className:b()(K,se),children:[(0,P.jsxs)("div",{className:B,children:[(0,P.jsxs)("div",{className:se,children:[(0,P.jsx)("h1",{className:G,children:(0,U.get)(c,"room.title","")}),!le&&(0,P.jsx)("span",{className:Z,children:Ne?(0,U.get)(c,"room.stats.total_user_str","0")+(0,U.get)(c,"room.stats.total_user_desp","\u4eba\u6b21\u89c2\u770b"):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f,{className:F}),(0,U.get)(c,"room.stats.user_count_str","0")]})})]}),(0,P.jsxs)("div",{className:V,children:[(0,P.jsx)("a",{className:Y,href:"//".concat((0,L.ZP)().VIDEO_DOMAIN,"/user/").concat((0,U.get)(c,"anchor.sec_uid","")),target:"_blank",rel:"noreferrer",children:(0,P.jsx)(x.q,{type:"extraExtraExtraSmall",src:(0,U.get)(c,"anchor.avatar_thumb.url_list[0]","")})}),(0,P.jsx)("div",{className:W,children:(0,U.get)(c,"anchor.nickname","")}),c.partition_road_map&&(0,P.jsx)(O,{links:Ee})]})]}),(0,P.jsxs)("div",{className:H,children:[(0,P.jsx)(C.ZP,{channel_id:o.RN.ROOM,className:q,size:M.qE.normal,followStatus:(0,U.get)(c,"anchor.follow_info.follow_status",s.E.INNOCENT),isLogin:Boolean((0,U.get)(I,"id_str","")),sec_user_id:(0,U.get)(I,"sec_uid",""),sec_to_user_id:(0,U.get)(c,"anchor.sec_uid",""),to_user_id:(0,U.get)(c,"anchor.id_str",""),current_room_id:D,followCb:Se}),T&&!A&&!le&&(0,P.jsxs)(M.zx,{type:"secondary",size:"normal",className:Q,onClick:be,children:[m===j.cK.NOT_LINK&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{className:z}),"\u7533\u8bf7\u8fde\u7ebf"]}),m===j.cK.LINKING&&"\u53d6\u6d88\u7533\u8bf7",m===j.cK.LINKED&&"\u65ad\u5f00\u8fde\u7ebf"]}),D&&!le&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(M.zx,{className:J,onMouseLeave:he,onMouseEnter:function(){me(!0),(0,E.Cm)(),he.cancel()},children:[(0,P.jsx)(h,{className:X}),(0,P.jsx)("span",{children:"\u624b\u673a\u89c2\u770b"}),(0,P.jsxs)("div",{className:$,style:{display:de?"block":"none"},children:[(0,P.jsx)("img",{className:ee,src:(0,U.get)(c,"qrcode_url",""),alt:""}),(0,P.jsx)("p",{className:ne,children:"\u626b\u7801\u89c2\u770b"}),(0,P.jsx)("p",{className:te,children:"\u6253\u5f00\u6296\u97f3APP\u626b\u63cf\u4e8c\u7ef4\u7801\u53ef\u4ee5\u8fdb\u884c\u66f4\u591a\u4e92\u52a8"})]})]}),(0,P.jsxs)("button",{className:re,type:"button",onMouseLeave:ye,onMouseEnter:function(){pe(!0),ye.cancel()},children:[(0,P.jsx)(_,{className:oe}),ve&&(0,P.jsx)("ul",{className:ie,children:(0,P.jsx)("li",{className:ae,onClick:function(){(0,E.dP)(),(0,w.F)({type:ue.R.ROOM,param:{roomId:D,currentRoomId:D},submitParam:{targetRoomId:D,secTargetAnchorId:(0,U.get)(c,"anchor.sec_uid","")}})},children:"\u4e3e\u62a5\u76f4\u64ad\u95f4"})})]})]})]})]})}))},22124:function(e,n,t){t.r(n);var r=t(49915),o=t.n(r),i=t(98054),a=t.n(i),s=t(31806),u=t.n(s),c=t(16937),l=t.n(c),f=t(79342),d=t.n(f),m=t(8984),_=t.n(m),v=t(93558),p=t.n(v),h=t(57113),y=t.n(h),E=t(11501),g=t.n(E),b=t(97320),N=t.n(b),S=t(21646),T=t.n(S),A=t(13226),I=t.n(A),P=t(45359),O=t.n(P),C=t(69268),w=t.n(C),L=t(76946),R=t.n(L),k=t(22582),j=t.n(k),x=t(40485),M=t.n(x),U=t(89748),D=t.n(U),K=t(16169),B=t.n(K),G=t(2501),Z=t.n(G),F=t(86723),V=t.n(F),Y=t(7791),W=t.n(Y),H=t(18418),q=t.n(H),Q=t(39384),z=t(72877),J=t(90888),X=t(79993),$=t(4583),ee=t(20350),ne=t(57073),te=t(84333),re=t(95650),oe=t(92530),ie=t(50888),ae=t(73612),se=t(58429),ue=t(10002),ce=t(86795),le=t(15137),fe=t(92728),de=t(48570),me=t(65735),_e=t(31602),ve=t(79084),pe=t(25126),he=t(63317),ye=t(94420),Ee=t(16379),ge=t(17696),be=t(42988),Ne=t(96260),Se=t(22929),Te=t(87762),Ae=t(63737),Ie=t(39004),Pe=t(56128),Oe=t.n(Pe),Ce=t(90511),we=t.n(Ce),Le=t(31121),Re=t(63456),ke=t(39751),je=t(46378),xe=t(64503);function Me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Me(Object(t),!0).forEach((function(n){De(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function De(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Be(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}function Ge(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){Be(i,r,o,a,s,"next",e)}function s(e){Be(i,r,o,a,s,"throw",e)}a(undefined)}))}}function Ze(e,n){return He(e)||We(e,n)||Ve(e,n)||Fe()}function Fe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ve(e,n){if(e){if("string"==typeof e)return Ye(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ye(e,n):void 0}}function Ye(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function We(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}function He(e){if(Array.isArray(e))return e}var qe=Ie.ZP.lib({resolved:{},chunkName:function(){return"common-utils-message"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!t.m[n]},importAsync:function(){return Promise.all([t.e(535),t.e(600)]).then(t.bind(t,91349))},requireAsync:function(e){var n=this,t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((function(e){return n.resolved[t]=!0,e}))},requireSync:function e(n){var r=this.resolve(n);return t(r)},resolve:function e(){return 91349}},{ssr:!1}),Qe=Date.now(),ze=function(e){var n,t,r,o,i,a,s,u=e.error,c=e.iframeConf,l=Ze((0,Re.useState)(u),2),f=l[0],d=l[1],m=Ze((0,Re.useState)(!1),2),_=m[0],v=m[1],p=(0,Re.useRef)(),h=Ze((0,Re.useState)(oe.Yq.DEFAULT),2),y=h[0],E=h[1],g=Ze((0,Re.useState)([]),2),b=g[0],N=g[1],S=(0,Re.useRef)(!1),T=Ze((0,Re.useState)(!1),2),A=T[0],I=T[1],P=Ze((0,Re.useState)(!1),2),O=P[0],C=P[1],w=Ze((0,Re.useState)([]),2),L=w[0],R=w[1],k=Ze((0,Re.useState)($.k.NONE),2),j=k[0],x=k[1],M=Ze((0,Re.useState)(!1),2),U=M[0],D=M[1],K=(0,ke.TH)(),B=/iframe/.test(K.pathname),G=(0,pe.Z)(),Z=G.userStore.userInfo,F=G.linkmicStore,V=F.setLinkMicLayout,Y=F.linkRoomType,W=F.isPlayModeNotSupport,H=F.setIsPlayModeNotSupport,q=G.roomStore,Ie=q.roomInfo,Pe=(q.setRoomInfo,q.setEmojiList),we=q.setEmojiReflex,Le=q.setUserCountStr,Me=q.setTotalUserCountStr,Be=q.setRoomStatus,Fe=q.emojiReflex,Ve=q.emojiList,Ye=G.giftStore,We=Ye.giftStatus,He=Ye.supportedGiftPages,ze=Ye.balance,Je=Ye.setGiftSwitchStatus,Xe=Ye.setGiftAuthStatus,$e=Ye.setGiftTestStatus;(0,de.Z)(!0),(0,me.Z)();var en=(null===(n=Ie.room)||void 0===n?void 0:n.live_room_mode)===ee.ke.MEDIA,nn=Ze((0,Re.useState)(!en&&(null===(t=Ie.room)||void 0===t||null===(r=t.room_auth)||void 0===r?void 0:r.LandscapeChat)!==ee.xW.OFF),2),tn=nn[0],rn=nn[1],on=Ie.roomId,an=void 0===on?"":on,sn=Ie.web_rid,un=(0,he.Z)(),cn=(0,_e.Z)(),ln=cn.renderLivePlayer,fn=cn.onRoomBlur,dn=cn.onRoomFocus,mn=cn.isPlay,_n=(0,Re.useCallback)((function(){ye.Z.polling(an)}),[an]),vn=(0,Re.useCallback)(function(){var e=Ge(regeneratorRuntime.mark((function e(n){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=p.current)||void 0===t||t.inputClear(),(0,te.hA)({anchor_id:(0,Ce.get)(Ie,"anchor.id_str",""),room_id:an,message:n}),e.next=4,(0,z.W)({room_id_str:an,content:n});case 4:r=e.sent,o=r.data,e.t0=o.status_code,e.next=e.t0===X.Ze.SUCCESS?9:e.t0===X.Ze.MUTE?11:e.t0===X.Ze.WORD_LIMITED?13:15;break;case 9:return ye.Z.queuePush((0,ne.ft)(o.data)),e.abrupt("break",17);case 11:return be.F.info(o.data.prompts||"\u4f60\u5df2\u88ab\u7981\u8a00"),e.abrupt("break",17);case 13:return be.F.info(o.data.prompts||"\u8d85\u51fa\u5b57\u6570\u9650\u5236"),e.abrupt("break",17);case 15:return be.F.info(o.data.prompts||"\u670d\u52a1\u51fa\u73b0\u5f02\u5e38"),e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[an,Ie]),pn=(0,Re.useCallback)(Ge(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S.current&&(0,te.y3)({duration:Date.now()-Qe,anchor_id:(0,Ce.get)(Ie,"anchor.id_str",""),room_id:an,stream_type:un}),(0,te.mZ)({duration:Date.now()-Qe,stream_type:un}),e.next=5,(0,J.jL)(an);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[an,Ie,un]),hn=(0,Re.useCallback)(Ge(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window&&window.__INVISIBLE_QUERY__||sessionStorage.getItem("route_params"),t=n&&n.enter_from_merge,e.next=4,(0,J.el)(sn,an,t);case 4:case"end":return e.stop()}}),e)}))),[an,sn]);(0,Re.useEffect)((function(){hn()}),[hn]),(0,Re.useEffect)((function(){Se.TU("live_detail")}),[]),(0,Re.useEffect)((function(){setTimeout((function(){window.__INVISIBLE_QUERY__&&(0,te.AE)(un)}),500)}),[un]),(0,Re.useEffect)((function(){var e=(0,Ce.get)(Ie,"room.room_auth.Gift");Xe(e)}),[Ie]),(0,Re.useEffect)((function(){try{Ge(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.h.getVar({name:"gift_test_status",defaultValue:!1});case 2:n=e.sent,$e(n);case 4:case"end":return e.stop()}}),e)})))()}catch(e){}}),[]);var yn=(0,Re.useCallback)((function(e){N(e.filter((function(e){return(0,ne.J$)(e)&&(0,ne.G$)(Z.id_str,e)})))}),[Z.id_str]);(0,Re.useEffect)((function(){var e=ye.Z.subscribe(ee.dQ.CHATROOM,yn);return function(){e()}}),[yn]);var En=(0,Re.useCallback)((function(e){e.forEach((function(e){var n,t,r,o=e.method,i=e.payload;if(o&&i){var a=Number(window.ParsePbModule.parsePbLongNumber(i.action));switch(o){case ee.lm.WEBCAST_ROOM_USER_SEQ_MESSAGE:Le(i.totalStr),i.totalUserStr&&Me(i.totalUserStr);break;case ee.lm.WEBCAST_VERIFY_MESSAGE:switch(a){case ee.Jq.CLOSE_CHAT:v(!1),E(oe.Yq.DEFAULT);break;case ee.Jq.OPEN_CHAT:v(!0);break;case ee.Jq.CLOSE_DANMAKU:rn(!1);break;case ee.Jq.OPEN_DANMAKU:rn(!0);break;case ee.Jq.CLOSE_GIFT:Xe(!1);break;case ee.Jq.OPEN_GIFT:Xe(!0)}break;case ee.lm.WEBCAST_CONTROL_MESSAGE:switch(a){case ee.Rz.FINISH:case ee.Rz.FINISH_BY_ADMIN:case ee.Rz.ROOM_FINISH_BY_SWITCH:Be(ee.LV.END),Je(!1),ye.Z.stop(),null===(n=p.current)||void 0===n||n.clear();break;case ee.Rz.RESUME:Je(!0),v(!0),x($.k.NONE);break;case ee.Rz.PAUSE:x($.k.ANCHOR_BAN)}break;case ee.lm.WEBCAST_MEMBER_MESSAGE:switch(a){case ee.WU.SET_SILENCE:case ee.WU.MANAGER_SET_SILENCE:v(!1),E(oe.Yq.MUTE);break;case ee.WU.CANCEL_SILENCE:case ee.WU.MANAGER_CANCEL_SILENCE:v(!0);break;case ee.WU.BLOCK:x($.k.BLOCK),Xe(!1),v(!1),E(oe.Yq.BLACK_HOUSE);break;case ee.WU.KICK_OUT:x($.k.KICK_OUT),Xe(!1),v(!1),ye.Z.stop(),null===(t=p.current)||void 0===t||t.clear(),E(oe.Yq.KICK_OUT),D(!0);break;case ee.WU.LEAVE:var s,u=window.ParsePbModule.parsePbLongNumber((0,Ce.get)(i,"user.id"));if("WEB_INITIATIVE"!==i.actionDescription&&u===Z.id_str)x($.k.KICK_OUT),Xe(!1),v(!1),ye.Z.stop(),null===(s=p.current)||void 0===s||s.clear(),E(oe.Yq.KICK_OUT),D(!0)}break;case ee.lm.WEBCAST_NOTICE_MESSAGE:switch(a=Number(window.ParsePbModule.parsePbLongNumber(i.noticeType))){case ee.F3.PAUSE:x($.k.ANCHOR_BAN);break;case ee.F3.RESUME:v(!0),x($.k.NONE)}break;case ee.lm.WEBCAST_DELETE_MESSAGE:var c=i.deleteMsgIds.map(window.ParsePbModule.parsePbLongNumber);null===(r=p.current)||void 0===r||r.delete(c)}}}))}),[Z]);(0,Re.useEffect)((function(){return ye.Z.subscribe(ee.dQ.ROOM_BUSINESS,En),function(){ye.Z.unsubscribe(ee.dQ.ROOM_BUSINESS,En)}}),[En]),Re.useEffect((function(){var e,n=(0,Ce.get)(Ie,"room.linker_map",{}),t=(0,Ce.get)(Ie,"room.linker_detail.linker_play_modes",{});n[5]?t.includes(24)?e=ge.y.AUDIO_1V8:t.includes(26)&&(e=ge.y.AUDIO_GRID):n[12]?e=t.includes(4)?ge.y.VIDEO_DYNAMIC:ge.y.VIDEO_GRID:n[8]&&(e=ge.y.VIDEO_1V6),V(e)}),[Ie,V,Z]);var gn=Re.useCallback((function(e){e.forEach((function(e){var n=e.method,t=e.payload;if(n&&t){var r=Number(window.ParsePbModule.parsePbLongNumber(t.messageType));if("WebcastLinkMicMethod"===n&&r===Ee.iM.TYPE_TURNON){var o=t,i=o.scene,a=o.playModes,s=void 0===a?[]:a;if("object"===Ke(i)){var u=Number(window.ParsePbModule.parsePbLongNumber(i));u===ee.vX.VIDEO_1V6?V(ge.y.VIDEO_1V6):u===ee.vX.VIDEO_GRID&&null!=s&&s.includes(4)?V(ge.y.VIDEO_DYNAMIC):u===ee.vX.VIDEO_GRID&&V(ge.y.VIDEO_GRID)}}if("WebcastLinkMicMethod"===n&&r===Ee.iM.TYPE_TURNON){var c=t,l=c.scene,f=c.playModes,d=void 0===f?[]:f;if("object"===Ke(l)){var m=Number(window.ParsePbModule.parsePbLongNumber(l));9!==m&&13!==m||H(!0),8===m&&null!=d&&d.includes(4)&&H(!0)}}}}))}),[V,H]);(0,Re.useEffect)((function(){return Y||ye.Z.subscribe(ee.dQ.LINK,gn),function(){ye.Z.unsubscribe(ee.dQ.LINK,gn)}}),[Y,gn]),(0,Re.useEffect)((function(){d(u)}),[u]);var bn=(0,ve.Z)(),Nn=(0,Re.useMemo)((function(){var e;return De(e={},ve.$.ROOM_ID_EMPTY,(function(){v(!1),E(oe.Yq.DEFAULT),x($.k.LIVE_FINISH)})),De(e,ve.$.LIVING_PAUSE,(function(){v(!0),x($.k.ANCHOR_BAN)})),De(e,ve.$.NO_LOGIN,(function(){v(!1),E(oe.Yq.NO_LOGIN)})),De(e,ve.$.LIVING_END,(function(){D(!0),v(!1),E(oe.Yq.END),x($.k.LIVE_FINISH),I(!1),(0,J.Gq)(Ie.web_rid,5).then((function(e){var n=(0,Ce.get)(e,"data.data.data",[]).map((function(n){return Ue(Ue({},n),{},{room:(0,ne.C_)(n.room),requestId:e.headers["x-tt-logid"]})}));R(n)}))})),De(e,ve.$.DEFAULT,(function(){v(!0)})),e}),[Ie.web_rid]);(0,Re.useEffect)((function(){Nn[bn](),(Ie.enter_mode===ee.gE.APP||W)&&(v(!1),Je(!1),ye.Z.stop(),E(oe.Yq.APP_ONLY))}),[Nn,bn,Ie.enter_mode,W]),(0,Re.useEffect)((function(){var e=(0,Ce.get)(Ie,"anchor.id_str","");e&&an&&Z.id_str&&Z.id_str===e&&d({title:se.d.LIVING})}),[Ie,Z.id_str,an]),(0,Re.useEffect)((function(){return"undefined"!=typeof window&&window.addEventListener("beforeunload",pn),function(){"undefined"!=typeof window&&window.removeEventListener("beforeunload",pn)}}),[pn]),(0,Re.useEffect)((function(){Ge(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.b)();case 2:n=e.sent,t={},r=n.data.emoji_list.map((function(e){var n=e.origin_uri,r=e.display_name,o=e.emoji_url,i=e.hide;return t[r]=o.url_list[0],{display_name:r,hide:i,uri:n,url:o.url_list[0]}})),Pe(r),we(t);case 7:case"end":return e.stop()}}),e)})))()}),[]);var Sn=(0,Re.useMemo)((function(){return{input:!1,display:!0,map:Fe,list:Ve,icon:""}}),[Fe,Ve]),Tn=(0,Ce.get)(Ie,"anchor.nickname",""),An=Re.useCallback((function(e){I(e),C(!1)}),[]),In=(0,Re.useCallback)((function(){C((function(e){return(0,te.Yk)(!e),!e}))}),[]);return f?(0,xe.jsx)(se.I,Ue({},f)):(0,xe.jsxs)("div",{className:je.Z.living,children:[(0,xe.jsx)(le.Z,{title:"".concat(Tn,"\u7684\u6296\u97f3\u76f4\u64ad\u95f4 - \u6296\u97f3\u76f4\u64ad"),description:"\u6b22\u8fce\u6765\u5230".concat(Tn,"\u7684\u6296\u97f3\u76f4\u64ad\u95f4\uff0c").concat(Tn,"\u4e0e\u5927\u5bb6\u4e00\u8d77\u8bb0\u5f55\u7f8e\u597d\u751f\u6d3b - \u6296\u97f3\u76f4\u64ad"),keywords:"".concat(Tn,",").concat(Tn,"}\u76f4\u64ad,").concat(Tn,"\u6296\u97f3,").concat(Tn,"\u76f4\u64ad\u95f4,").concat(Tn,"\u6296\u97f3\u76f4\u64ad,").concat(Tn,"\u6296\u97f3\u76f4\u64ad\u95f4,\u6296\u97f3\u76f4\u64ad,\u6296\u97f3")}),(0,xe.jsxs)("div",{className:Oe()(je.Z.container,(o={},De(o,je.Z.theater,A),De(o,"is-theater",A),De(o,je.Z.iframe,B),o)),children:[(0,xe.jsx)(qe,{ref:function(e){window.ParsePbModule=e,null!=e&&e.default&&_n()}}),!f&&(0,xe.jsxs)("div",{className:Oe()(je.Z.playerWrap,De({},je.Z.hasGiftBar,We)),style:{width:O?"100%":undefined},children:[!A&&!B&&(0,xe.jsx)(ce.Z,{}),(0,xe.jsx)("div",{className:je.Z.player,children:Ie.enter_mode===ee.gE.APP||W?(0,xe.jsx)(re.Z,{avatar:(0,Ce.get)(Ie.anchor,"avatar_thumb.url_list[0]",""),qrcode:Ie.qrcode_url,className:je.Z.appOnly}):B?(0,xe.jsx)(ie.Z,{iframePlayerConf:c,isPause:U,playerCoverText:j,isLogPlay:S,onSend:vn}):(0,xe.jsx)(ue.Z,{recommendOnEndRoom:L,isDanmakuFeatureOn:tn,isPause:U,playerCoverText:j,isTheaterOn:A,onTheaterSwitch:An,isLogPlay:S,onSend:vn,isFoldChatroom:O,onArrowClick:In,closeVideoClick:!0})}),We&&(0,xe.jsx)(fe.Z,{giftPages:He,balance:ze,isLogin:Boolean((0,Ce.get)(Z,"id_str"))})]}),!B&&(0,xe.jsx)("div",{className:je.Z.chatroomWrap,children:(0,xe.jsxs)("div",{className:je.Z.chatroomContainer,children:[(null===(i=Ie.room)||void 0===i||null===(a=i.room_auth)||void 0===a?void 0:a.PublicScreen)===ee.RZ.OFF?(0,xe.jsx)(Ne.jj,{type:Ne.NI.emptyList,title:"\u5f53\u524d\u76f4\u64ad\u95f4\u6682\u4e0d\u652f\u6301\u53d1\u5f39\u5e55"}):(0,xe.jsx)("div",{className:je.Z.chatroomContent,children:(0,xe.jsx)(Ae.ZP,{ref:p,className:je.Z.chatroom,inputContainerStyle:X.J1,emojiConfig:Sn,customMessages:X._G,messageMethods:X.NL,bottomMessageMethods:X.nx,showHeader:!1,enableChat:_,source:b,placeholder:"\u4e0e\u5927\u5bb6\u4e92\u52a8\u4e00\u4e0b...",inputLimit:50,enableEnterSend:!0,disableInputEnterWrap:!0,onSend:vn,enableAnimation:!0})}),!_&&(0,xe.jsx)(oe.ZP,{className:je.Z.input_disabled,type:y})]})})]}),(null===(s=Ie.relevant_rooms)||void 0===s?void 0:s.length)>0&&!A&&!B&&(0,xe.jsx)("div",{className:je.Z.cardRelevant,children:(0,xe.jsxs)("div",{className:je.Z.flexContainer,children:[ln(),(0,xe.jsx)(ae.Z,{title:"\u76f8\u5173\u76f4\u64ad",want_more:!1,category:"relative",tabs:[],target:"_self",cardPlayerIsPlay:mn,rooms:Ie.relevant_rooms,onRoomFocus:dn,onRoomBlur:fn})]})})]})};n.default=(0,Le.Pi)(ze)},31602:function(e,n,t){t.d(n,{Z:function(){return y}});t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(89748),t(16169),t(2501);var r=t(90455),o=t(71686),i=t(9711),a=t(56128),s=t.n(a),u=t(63456),c="ZwwaC8cC",l="NjeS1tbd",f="bsbxPxNS",d="zVllxlOE",m=t(64503);var _=u.memo((function(e){var n,t,r,a=e.x,_=e.y,v=e.width,p=e.height,h=e.visible,y=e.forwardRef,E=e.src,g=void 0===E?"":E,b=e.onPause,N=e.onPlay;return u.useEffect((function(){if(!h){var e,n=null===(e=y.current)||void 0===e?void 0:e.getPlayer();null!=n&&n.video&&(null==n||n.position({y:0,h:1}))}}),[h]),(0,m.jsx)("div",{className:s()(c,(n={},t=d,r=!h,t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n)),style:{left:a,top:_},children:(0,m.jsx)("div",{className:l,style:{width:v,height:p},children:(0,m.jsx)(o.N,{className:f,isPure:!0,autoplayMuted:!0,ref:y,url:g,onPlaying:N,onPause:b,children:(0,m.jsx)(i.G,{})})})})})),v=t(90511);function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var y=function(){var e=p(u.useState({x:0,y:0,width:0,height:0}),2),n=e[0],t=e[1],o=p(u.useState(!1),2),i=o[0],a=o[1],s=p(u.useState(),2),c=s[0],l=s[1],f=p(u.useState(!1),2),d=f[0],h=f[1],y=u.useRef(null),E=u.useRef(0),g=u.useCallback((function(e,n){var r=n.current;r&&(l(e),E.current+=1,t({x:r.offsetLeft,y:r.offsetTop,width:r.offsetWidth,height:r.offsetHeight}),a(!0))}),[]),b=u.useCallback((function(){if(a(!1),y.current){var e=y.current.getPlayer();e&&(e.pause(),l(undefined))}}),[]),N=u.useCallback((function(){h(!0)}),[]),S=u.useCallback((function(){h(!1)}),[]),T=u.useCallback((function(){if(!c&&0===E.current)return null;var e=new r.Z((0,v.get)(c,"room",{})).getCurrResolution();return(0,m.jsx)(_,{forwardRef:y,x:n.x,y:n.y,width:n.width,height:n.height,visible:i&&d,onPlay:N,onPause:S,src:(null==c?void 0:c.streamSrc)||e.current.url})}),[i,n,c,d,N,S]);return{cardPlayerRef:y,renderLivePlayer:T,onRoomFocus:g,onRoomBlur:b,isPlay:d}}},48570:function(e,n,t){t.d(n,{Z:function(){return V}});t(86723),t(76946),t(93558),t(7791),t(57113),t(18418),t(31806),t(16937);var r,o=t(63456),i=t(28025),a=t.n(i),s=t(42988),u=t(69725),c=t(84538),l=t(84333),f=t(50854),d=t(16603),m=t(93976),_=t(14032),v=t(44313),p=t(12224);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){E(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var g={webid:(null===(r=_.Es())||void 0===r?void 0:r.user_unique_id)||"",app_name:"douyin_web"},b=function(){var e,n,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return p.Z.get("/webcast/gift/list/",{params:y(y(y(y({},null==m||null===(e=v)||void 0===e?void 0:e.getNavigatorParams()),null==m||null===(n=v)||void 0===n?void 0:n.getSharkCommonParams({})),g),{},{webcast_sdk_version:2450},t)})},N=function(){var e,n,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return p.Z.get("/webcast/assets/effects/",{params:y(y(y(y({},null==m||null===(e=v)||void 0===e?void 0:e.getNavigatorParams()),null==m||null===(n=v)||void 0===n?void 0:n.getSharkCommonParams({})),g),{},{webcast_sdk_version:2450},t)})},S=function(){var e,n,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return p.Z.post("/webcast/gift/send/",d.stringify(y({},t)),{headers:{"Content-Type":"application/x-www-form-urlencoded"},params:y(y(y({},null==m||null===(e=v)||void 0===e?void 0:e.getNavigatorParams()),null==m||null===(n=v)||void 0===n?void 0:n.getSharkCommonParams({})),g)})},T=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return p.Z.get("/webcast/wallet/info/",{params:y({},e)})},A=t(25126),I=(t(49915),t(64416)),P=t(24752),O=t(38387),C=t(13928),w="Hq4HRAtq",L="RbVLb3sf",R="K5yWVLZ4",k="cajyrV0U",j=t(64503);function x(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}function M(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){x(i,r,o,a,s,"next",e)}function s(e){x(i,r,o,a,s,"throw",e)}a(undefined)}))}}var U=function(e){var n=e.title,t=e.content,r=e.confirmBtnText,o=void 0===r?"\u786e\u5b9a":r,i=e.closeBtnText,a=void 0===i?"\u53d6\u6d88":i,s=e.onConfirm,u=e.onClose;return(0,j.jsx)(C.Z,{visible:!0,className:k,title:n,onCancel:u,children:(0,j.jsxs)("div",{className:w,children:[(0,j.jsx)("div",{className:L,children:t}),(0,j.jsxs)("div",{className:R,children:[(0,j.jsx)(O.zx,{onClick:function(){u&&u()},children:a}),(0,j.jsx)(O.zx,{onClick:function(){s&&s()},children:o})]})]})})},D=function(){var e,n,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=t.title,o=t.content,i=t.confirmBtnText,a=t.closeBtnText,s=t.cls,u=void 0===s?"confirm-modal":s,c=t.onConfirm,l=t.onClose,f=function(){n&&e&&(P.Z.removeClass(e,u),I.unmountComponentAtNode(e),n.removeChild(e),n.style.overflow="")},d=function(){var e=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return e.next=3,c();case 3:f();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=3;break}return e.next=3,l();case 3:f();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){e=P.Z.findDom(document.body,".".concat(u)),n=document.body,e||(e=document.createElement("div"),P.Z.addClass(e,u),n.appendChild(e)),n.style.overflow="hidden",I.render((0,j.jsx)(U,{title:r,content:o,confirmBtnText:i,closeBtnText:a,onConfirm:d,onClose:m}),e)};return{showModal:_,destroyModal:f}},K=["giftSource"];function B(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){F(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function F(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var V=function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=(0,A.Z)(),t=n.userStore.userInfo,r=n.roomStore.roomInfo,i=n.giftStore,d=i.giftStatus,m=i.giftList,_=i.effectList,v=i.setGiftMessages,p=i.setGiftPages,h=i.setEffectList,y=i.setBalance,E=D({content:"\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u8bf7\u5145\u503c\uff5e",confirmBtnText:"\u53bb\u5145\u503c",onConfirm:f.n_}),g=E.showModal,I=(0,u.n)(),P=I.player,O=Boolean(a()(t,"id_str")),C=a()(r,"roomId",""),w=a()(r,"anchor.sec_uid",""),L=(0,o.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return b(Z({room_id:C,to_room_id:C,sec_anchor_id:w,sec_to_user_id:w,fetch_giftlist_from:3,gift_scene:1},e)).then((function(e){var n=e.data,t=e.logId;if(0===a()(n,"status_code")){var r=a()(n,"data.pages",[]),o=(0,f.BU)(r);return p(o),Promise.resolve(n)}return s.F.info(a()(n,"data.prompts","\u83b7\u53d6\u793c\u7269\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")),c.Z.error("\u83b7\u53d6\u793c\u7269\u5931\u8d25",n,t),Promise.reject(n)}))}),[C,w,p]),R=(0,o.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return N(Z({is_living:!1,download_assets_from:3},e)).then((function(e){var n=e.data,t=e.logId;if(0===a()(n,"status_code")){var r=a()(n,"data.assets",[]),o=(0,f.Js)(r);return h(o),Promise.resolve(n)}return s.F.info(a()(n,"data.prompts","\u83b7\u53d6\u7279\u6548\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")),c.Z.error("\u83b7\u53d6\u7279\u6548\u5931\u8d25",n,t),Promise.reject(n)}))}),[h]),k=(0,o.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return N(Z({is_living:!1,download_assets_from:3},e)).then((function(e){var n=e.data,t=e.logId;if(0===a()(n,"status_code")){var r=a()(n,"data.assets",[]),o=(0,f.Js)(r);return Promise.resolve(o[0])}return c.Z.error("\u83b7\u53d6\u5355\u4e2a\u7279\u6548\u5931\u8d25",n,t),Promise.reject()}))}),[]),j=(0,o.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(O)return T(Z({},e)).then((function(e){var n=e.data,t=e.logId;if(0===a()(n,"status_code")){var r=a()(n,"data.diamond",0);return y(r),Promise.resolve(n)}return s.F.info(a()(n,"data.prompts","\u83b7\u53d6\u6296\u5e01\u4f59\u989d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")),c.Z.error("\u83b7\u53d6\u6296\u5e01\u4f59\u989d\u5931\u8d25",n,t),Promise.reject(n)}))}),[O,y]),x=(0,o.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(!O)return(0,f.m8)("\u767b\u5f55\u540e\u5373\u53ef\u9001\u793c","live_gift"),Promise.reject();if(!d)return s.F.info("\u6682\u65e0\u9001\u793c\u6743\u9650\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),Promise.reject();var r=e.giftSource,o=B(e,K);return S(Z({room_id:C,to_room_id:C,sec_to_user_id:w,send_type:4,send_scene:1,gift_source:0,buff_level:0,to_episode_id:0},o)).then((function(i){var u=i.data,d=i.logId,p=a()(u,"status_code");if(0===p){var h=(0,f.mL)(a()(u,"data"),m,_,t,a()(o,"count"));v(h),j(),(0,l.U$)({gift_id:a()(u,"data.gift_id"),combo_cnt:a()(u,"data.combo_count"),group_cnt:a()(u,"data.group_count"),gift_source:r,money_per_unit:e.price,gift_cnt:e.count,money:e.price*e.count})}else 20003===p?(0,f.m8)("\u767b\u5f55\u540e\u5373\u53ef\u9001\u793c","live_gift"):40001===p?n&&g():42201===p?s.F.info("\u4e3a\u4fdd\u969c\u8d26\u53f7\u548c\u8d44\u91d1\u5b89\u5168\uff0c\u8bf7\u5148\u524d\u5f80\u6296\u97f3app\u5b8c\u6210\u8eab\u4efd\u9a8c\u8bc1"):42202===p?s.F.info("\u4e3a\u4fdd\u969c\u8d26\u53f7\u548c\u8d44\u91d1\u5b89\u5168\uff0c\u8bf7\u5148\u524d\u5f80\u6296\u97f3app\u5b8c\u6210\u8eab\u4efd\u6838\u5bf9"):(s.F.info(a()(u,"data.prompts","\u9001\u793c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")),c.Z.error("\u9001\u793c\u5931\u8d25",u,d));return 0===p?Promise.resolve(u):((0,f.rp)(P),Promise.reject(u))}))}),[O,d,t,C,w,m,_,P,j,v,g]);return(0,o.useEffect)((function(){e&&d&&(L(),R())}),[d]),(0,o.useEffect)((function(){e&&O&&j()}),[O]),{getGifts:L,getEffects:R,getSingleEffect:k,getBalance:j,sendGift:x}}},65735:function(e,n,t){t(93558);var r=t(63456),o=t(28025),i=t.n(o),a=t(20350),s=t(61108),u=t(50854),c=t(25126),l=t(94420);n.Z=function(){var e=(0,c.Z)(),n=e.userStore.userInfo,t=e.giftStore,o=t.giftStatus,f=t.giftList,d=t.effectList,m=t.setGiftMessages,_=i()(n,"sec_uid",""),v=(0,r.useCallback)((function(e){var n=e.filter((function(e){return!i()(e,"payload.repeatEnd")})).filter((function(e){var n=i()(e,"payload")||i()(e,"payload.msg",{});return!(i()(n,"user.secUid")===_)||e.method!==s.ZP.WEBCAST_GIFT_MESSAGE}));if(n.length){var t=(0,u.TG)(n,f,d);m(t)}}),[_,f,d,m]);(0,r.useEffect)((function(){return o&&l.Z.subscribe(a.dQ.GIFT,v),function(){l.Z.unsubscribe(a.dQ.GIFT,v)}}),[o,v])}},51771:function(e,n,t){t(49915),t(57113),t(81533),t(86723),t(11501),t(97320),t(98054),t(31806),t(16937),t(79342),t(8984),t(94515),t(59112),t(21646),t(13226),t(76946),t(93558),t(7791),t(18418),t(22582),t(40485),t(89748),t(16169),t(2501);var r=t(10444),o=t(20350),i=t(52727),a=t(14837),s=t(84538),u=t(84333),c=t(94420),l=t(94227),f=t(31031),d=t(16379),m=t(72342),_=t(17696),v=t(90511),p=t(63456),h=t(64969),y=t(25126);function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){b(i,r,o,a,s,"next",e)}function s(e){b(i,r,o,a,s,"throw",e)}a(undefined)}))}}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){I(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(){var e=(0,y.Z)(),n=e.linkmicStore,t=n.linkMicLayout,g=n.updateLinkMicConfig,b=n.setLinkMicSeats,T=n.setLinkStatus,P=n.setLinkMicLayout,O=n.linkStatus,C=n.linkRoomType,w=n.setLinkMicConfig,L=n.selfLinkMicId,R=n.resetStore,k=e.roomStore.roomInfo,j=e.userStore.userInfo,x=(0,h.Z)().leave,M=p.useRef(!1),U=p.useRef({}),D=p.useRef(),K=p.useRef({}),B=p.useCallback((function(){return L&&D.current?A(A({},U.current),{},I({},L,D.current)):U.current}),[L]),G=p.useCallback((function(){return K.current}),[]),Z=p.useCallback((function(e){"video"===C&&P(e)}),[C,P]);(0,m.w)({selfLinkMicId:L,setLayout:Z,setSeats:b,layout:t,getUsers:B,getPositions:G,enable:O!==l.cK.LINKED});var F=p.useCallback((function(e){var n=e||t,r=(0,v.cloneDeep)(l.Fk);return n===_.y.VIDEO_DYNAMIC&&(r={}),Object.values(U.current).forEach((function(e){"number"==typeof e.user_position&&(r[e.user_position]={idx:e.user_position,user:e})})),Object.keys(K.current).forEach((function(e){K.current[e]&&(r[e].info=A({},K.current[e]))})),1===Object.keys(r).length&&n===_.y.VIDEO_DYNAMIC&&(r[1]={idx:1}),r}),[t]),V=p.useCallback((function(e,n){U.current={},null==e||e.forEach((function(e){if(e&&"number"==typeof e.user_position){var n,t,r;if("number"!=typeof e.is_background)e.is_background=Number(null===(r=window.ParsePbModule)||void 0===r?void 0:r.parsePbLongNumber(e.is_background));if(null!==(n=e.content)&&void 0!==n&&null!==(t=n.linkmic_audience_content)&&void 0!==t&&t.rank_contributor_ids){var o,i,a,s=null===(o=e.content)||void 0===o||null===(i=o.linkmic_audience_content)||void 0===i?void 0:i.rank_contributor_ids,u=s[0];if(s&&"object"===S(u))e.content.linkmic_audience_content.rank_contributor_ids=s.map(null===(a=window.ParsePbModule)||void 0===a?void 0:a.parsePbLongNumber)}}var c;e&&e.linkmic_id_str&&(null!=j&&j.id_str&&(null===(c=e.user)||void 0===c?void 0:c.id_str)===(null==j?void 0:j.id_str)&&(D.current=e),U.current[e.linkmic_id_str]=e)}));var t=F(n);return O===l.cK.LINKED&&b(t),t}),[O,b,F,j]),Y=p.useCallback((function(e){var n={};return null==e||e.forEach((function(e){"undefined"!=typeof e.key&&"undefined"!=typeof e.value&&(n[e.key]=e.value)})),n}),[]),W=p.useRef(undefined),H=p.useRef(!1);p.useEffect((function(){!1!==H.current?t!==undefined&&((0,u.m8)(W.current),(0,u.h7)()):(0,u.h7)(),H.current=!0,W.current=t}),[t]);var q=p.useCallback(N(regeneratorRuntime.mark((function e(){var n,t,o,i,a,s,u,c,l,f,d,m,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,v.get)(k,"roomId",""),t=(0,v.get)(k,"anchor.sec_uid",""),o=(0,v.get)(k,"anchor.id_str",""),e.next=5,Promise.all([(0,r.lx)({room_id:n,anchor_id:o}),(0,r.$s)(n,t)]);case 5:i=e.sent,a=E(i,2),s=a[0],(u=a[1]).data&&0===u.status_code&&(l=Y(null===(c=u.data)||void 0===c?void 0:c.settings),w(A(A({},u.data),{},{config:l}))),s.data.data&&0===s.data.status_code&&(f=s.data.data,d=f.user,null==(m=f.locked_positions)||m.forEach((function(e){"undefined"!=typeof e.position&&(K.current[e.position]=e)})),_=V(d),b(_));case 11:case"end":return e.stop()}}),e)}))),[V,k,b,w,Y]);p.useEffect((function(){M.current||(q(),M.current=!0)}),[q]);var Q=p.useCallback((function(e){e.forEach((function(e){var n=e.method,t=e.payload;if(n&&t){var r=Number(window.ParsePbModule.parsePbLongNumber(t.action));switch(n){case o.lm.WEBCAST_CONTROL_MESSAGE:switch(r){case o.Rz.FINISH:case o.Rz.FINISH_BY_ADMIN:case o.Rz.ROOM_FINISH_BY_SWITCH:s.Z.info("\u76f4\u64ad\u95f4\u65ad\u64ad\u6d88\u606f\u4e0b\u53d1, \u79bb\u5f00\u804a\u5929\u5ba4"),x(i.JW.NONE,i._o.ANCHOR).finally((function(){(0,u.m8)(),R()}))}break;case o.lm.WEBCAST_MEMBER_MESSAGE:switch(r){case o.WU.KICK_OUT:case o.WU.BLOCK:case o.WU.LEAVE:s.Z.info("\u76f4\u64ad\u95f4\u7528\u6237\u88ab\u8e22\u51fa, \u79bb\u5f00\u804a\u5929\u5ba4"),x(i.JW.NONE,i._o.ANCHOR).finally((function(){(0,u.m8)(),R()}))}break;case o.lm.WEBCAST_NOTICE_MESSAGE:if((r=Number(window.ParsePbModule.parsePbLongNumber(t.noticeType)))===o.F3.PAUSE)s.Z.info("\u76f4\u64ad\u95f4\u88ab\u5c01\u7981, \u79bb\u5f00\u804a\u5929\u5ba4"),x(i.JW.NONE,i._o.ANCHOR).finally((function(){(0,u.m8)(),R()}))}}}))}),[x,R]);p.useEffect((function(){return c.Z.subscribe(o.dQ.ROOM_BUSINESS,Q),function(){c.Z.unsubscribe(o.dQ.ROOM_BUSINESS,Q)}}),[Q]);var z=p.useCallback((function(e){e.forEach((function(e){var n,t,r,c,m,v,p,h,y,E,N=e.method,A=e.payload;if(N&&A){var I=Number(window.ParsePbModule.parsePbLongNumber(A.messageType));if("WebcastLinkSettingNotifyMessage"===N){var C=A.settings;null!=C&&C.find((function(e){return 24===e.value}))?P(_.y.AUDIO_1V8):null!=C&&C.find((function(e){return 26===e.value}))&&P(_.y.AUDIO_GRID);var w=Y(C);g(w)}else if("WebcastLinkMicMethod"===N){if(I===d.iM.TYPE_SWITCH_SCENE){var L,k=A,M=k.scene,D=k.playModes,B=void 0===D?[]:D,G=k.linkedListUsers,Z=void 0===G?[]:G;if("object"===S(M)&&O===l.cK.LINKED){var W=Number(window.ParsePbModule.parsePbLongNumber(M));W===o.vX.VIDEO_1V6?L=_.y.VIDEO_1V6:W===o.vX.VIDEO_GRID&&null!=B&&B.includes(4)?L=_.y.VIDEO_DYNAMIC:W===o.vX.VIDEO_GRID&&(L=_.y.VIDEO_GRID),L&&P(L)}V(null==Z?void 0:Z.map(a._0),L)}}else if("WebcastLinkMessage"===N)switch(I){case f.W6.TYPE_LINKER_CLOSE:s.Z.info("\u63a5\u6536\u4e3b\u64ad\u5173\u95ed\u8fde\u9ea6\u76f4\u64ad\u95f4\u6d88\u606f"),x(i.JW.NONE,i._o.ANCHOR).finally((function(){(0,u.m8)(),R()}));break;case f.W6.TPYE_LINKER_LEAVE:s.Z.info("\u63a5\u6536\u79bb\u623f\u6d88\u606f\uff0c\u66f4\u65b0\u9ea6\u4e0a\u7528\u6237\u5217\u8868"),V(null===(n=A.leaveContent)||void 0===n||null===(t=n.linkedUsers)||void 0===t?void 0:t.map(a._0));break;case f.W6.TPYE_LINKER_ENTER:if(s.Z.info("\u63a5\u6536\u8fdb\u623f\u6d88\u606f\uff0c\u66f4\u65b0\u9ea6\u4e0a\u7528\u6237\u5217\u8868"),V(null===(r=A.enterContent)||void 0===r||null===(c=r.linkedUsers)||void 0===c?void 0:c.map(a._0)),null!=j&&j.id_str&&window.ParsePbModule.parsePbLongNumber(null===(m=A.enterContent)||void 0===m?void 0:m.userId)===(null==j?void 0:j.id_str)){var H=F();b(H)}break;case f.W6.TYPE_LINKER_UPDATE_USER:s.Z.info("\u63a5\u6536\u66f4\u65b0\u6d88\u606f\uff0c\u66f4\u65b0\u9ea6\u4e0a\u7528\u6237\u5217\u8868"),V(null===(v=A.updateUserContent)||void 0===v||null===(p=v.linkedUsers)||void 0===p?void 0:p.map(a._0));break;case f.W6.TPYE_LINKER_SYS_KICK_OUT:case f.W6.TPYE_LINKER_KICK_OUT:s.Z.info("\u63a5\u6536\u88ab\u8e22\u51fa\u623f\u95f4\uff0c\u66f4\u65b0\u4e0a\u9ea6\u72b6\u6001"),x(i.JW.NONE,i._o.ANCHOR).finally((function(){T(l.cK.NOT_LINK)}));break;case f.W6.TYPE_LINKER_CHANGE_PLAY_MODE:var q,Q,z=A.changePlayModeContent.changePlayModeData;if("object"===S(null==A?void 0:A.scene)&&O===l.cK.LINKED)(q=Number(window.ParsePbModule.parsePbLongNumber(null==A?void 0:A.scene))===o.vX.VIDEO_GRID&&null!=z&&null!==(Q=z.playModes)&&void 0!==Q&&Q.includes(4)?_.y.VIDEO_DYNAMIC:_.y.VIDEO_GRID)&&P(q);V(null==z||null===(h=z.linkedUsers)||void 0===h?void 0:h.map(a._0),q);break;case f.W6.TYPE_LINKER_LOCK_POSITION:var J=A.lockPositionContent.lockedPositions;K.current={},null==J||J.forEach((function(e){if("object"===S(e.position)){var n=Number(window.ParsePbModule.parsePbLongNumber(e.position));e.position=n,K.current[n]=e}else"number"==typeof e.position&&(K.current[e.position]=e)}));var X=F();b(X);break;case f.W6.TYPE_LINKER_LINKED_LIST_CHANGE:V(null===(y=A.linkedListChangeContent)||void 0===y||null===(E=y.linkedUsers)||void 0===E?void 0:E.map(a._0))}else if("WebcastLinkerContributeMessage"===N){var $=A,ee=$.totalScoreStr,ne=$.totalScoreRealStr,te=$.userContributeList,re=$.userId,oe=(null==te?void 0:te.map((function(e){return"object"===S(e.userId)?window.ParsePbModule.parsePbLongNumber(e.userId):"number"==typeof e.userId?"".concat(e.userId):""})))||[],ie="";"object"===S(re)?ie=window.ParsePbModule.parsePbLongNumber(re):"number"==typeof re&&(ie="".concat(re));var ae=Object.keys(U.current).find((function(e){var n;return(null===(n=U.current[e].user)||void 0===n?void 0:n.id_str)===ie}));if(ae&&U.current[ae]){var se,ue=null===(se=U.current[ae].content)||void 0===se?void 0:se.linkmic_audience_content;ue&&(ue.rank_contributor_ids=oe,ue.fan_ticket_real_str=ne,ue.fan_ticket_fuzzy_str=ee)}var ce=F();b(ce)}}}))}),[V,P,T,g,Y,x,R,F,b,O,j]);p.useEffect((function(){return null===c.Z||void 0===c.Z||c.Z.subscribe(o.dQ.LINK,z),function(){null===c.Z||void 0===c.Z||c.Z.unsubscribe(o.dQ.LINK,z)}}),[z]),p.useEffect((function(){var e="onpagehide"in self?"pagehide":"unload",n=function(e){if(O===l.cK.LINKED)return e.returnValue="\u6b63\u5728\u8fde\u9ea6\u4e2d\uff0c\u662f\u5426\u786e\u8ba4\u79bb\u5f00\uff1f","\u6b63\u5728\u8fde\u9ea6\u4e2d\uff0c\u662f\u5426\u786e\u8ba4\u79bb\u5f00\uff1f"},r=function(){x(i.JW.NONE,i._o.AUDIENCE,!0),t!==undefined&&(0,u.m8)()};return window.addEventListener("beforeunload",n),window.addEventListener(e,r),function(){window.removeEventListener("beforeunload",n),window.removeEventListener(e,r)}}),[O,x])}},64969:function(e,n,t){t.d(n,{Z:function(){return y}});t(52159),t(31806),t(16937),t(98054),t(79342),t(8984),t(79579),t(94515),t(59112);var r,o=t(10444),i=t(60781),a=t(52727),s=t(84538),u=t(84333),c=t(94227),l=(t(5345),t(98391));!function(e){e[e.CloseRoomTypeNormal=0]="CloseRoomTypeNormal",e[e.CloseRoomTypeForceClose=1]="CloseRoomTypeForceClose",e[e.CloseRoomTypeFinish=2]="CloseRoomTypeFinish",e[e.CloseRoomTypeAnchorKickout=4]="CloseRoomTypeAnchorKickout",e[e.CloseRoomTypeAccountKickout=5]="CloseRoomTypeAccountKickout",e[e.CloseRoomTypeSelfOnRecord=6]="CloseRoomTypeSelfOnRecord",e[e.CloseRoomTypeFail=7]="CloseRoomTypeFail",e[e.CloseRoomTypeForbidden=8]="CloseRoomTypeForbidden",e[e.CloseRoomTypeCocosError=9]="CloseRoomTypeCocosError",e[e.CloseRoomTypeChangingRoom=10]="CloseRoomTypeChangingRoom",e[e.CloseRoomTypeForceByMSeq=11]="CloseRoomTypeForceByMSeq",e[e.CloseRoomTypeTermination=12]="CloseRoomTypeTermination",e[e.CloseRoomTypeNone=13]="CloseRoomTypeNone"}(r||(r={}));var f=t(33738),d=t(69725),m=t(42988),_=t(90511),v=t(63456),p=t(25126),h=t(86243),y=function(){var e=(0,p.Z)(),n=e.roomStore.roomInfo,t=e.linkmicStore,y=t.setLinkStatus,E=t.linkStatus,g=t.selectedPosition,b=t.setApplySource,N=t.setIsCandidate,S=t.linkMicSeats,T=t.setSelfLinkedPosition,A=t.linkMicConfig,I=t.setDevices,P=e.userStore.userInfo,O=(0,d.n)().player,C=v.useMemo((function(){var e;return null===(e=S[g||""])||void 0===e?void 0:e.user}),[S,g]),w=(0,_.get)(n,"anchor.id_str",""),L=(0,_.get)(n,"roomId",""),R=v.useCallback((function(e){return(0,o.q7)(Object.assign({room_id:L,anchor_id:w,link_type:e,apply_type:l.XC.NORMAL,guest_supported_vendor:4},g===undefined?{}:{position:g})).then((function(e){var n,t=e.data,r=e.logId,o=t.status_code;if(0===o)y(c.cK.LINKING),A.config[f.V.AU_BigPartyAcceptNeedVerified]!==f.q.OPEN&&A.config[f.V.AU_AudioChatAcceptNeedVerified]!==f.q.OPEN||m.F.info("\u7533\u8bf7\u6210\u529f\uff0c\u7b49\u5f85\u4e3b\u64ad\u901a\u8fc7",O.root),null!=t&&null!==(n=t.data)&&void 0!==n&&n.auto_join_full&&N(!0),(0,u.Hj)();else if(4016005===o)m.F.info("\u5f53\u524d\u76f4\u64ad\u95f4\u4ec5\u652f\u6301\u7c89\u4e1d\u8fde\u7ebf\uff0c\u8bf7\u5148\u5173\u6ce8\u4e3b\u64ad",O.root);else if(30010===o)m.F.info("\u60a8\u5f53\u524d\u672a\u5b9e\u540d\u8ba4\u8bc1\uff0c\u8bf7\u53bb\u624b\u673a\u7aef\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\u540e\u91cd\u8bd5",O.root);else{var i;m.F.info((null==t||null===(i=t.data)||void 0===i?void 0:i.prompts)||"\u7533\u8bf7\u4e0a\u9ea6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root)}return 0===o?Promise.resolve(t):(s.Z.error("\u7533\u8bf7\u4e0a\u9ea6\u5931\u8d25",t,r),Promise.reject(t))}))}),[y,L,w,g,N,A.config,O]),k=v.useCallback((function(e,n,t){var i;if(E===c.cK.NOT_LINK)return Promise.resolve();if(t&&"function"==typeof(null===(i=navigator)||void 0===i?void 0:i.sendBeacon)){var l=new URLSearchParams;return l.append("room_id",L),l.append("end_reason","".concat(r.CloseRoomTypeNormal)),l.append("request_source","leave_normally"),navigator.sendBeacon("".concat(h.Pe(),"/webcast/linkmic_audience/leave/?aid=6383&live_id=1"),l),(0,u.SR)(e,n),Promise.resolve()}return(0,o.TL)({room_id:L,end_reason:r.CloseRoomTypeNormal,request_source:"leave_normally"}).then((function(t){var r=t.data,o=t.logId,i=r.status_code;return 0===i?((0,u.SR)(e,n),I({audio:undefined,video:undefined}),y(c.cK.NOT_LINK)):m.F.info("\u65ad\u5f00\u8fde\u7ebf\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root),0===i?Promise.resolve(r):(s.Z.error("\u65ad\u5f00\u8fde\u7ebf\u5931\u8d25",r,o),Promise.reject(r))})).finally((function(){b(a.JW.NONE)}))}),[L,y,b,E,O,I]),j=v.useCallback((function(){return(0,o.JJ)(L).then((function(e){var n=e.data,t=e.logId,r=n.status_code;if(0===r){var o,u,l;if(y(c.cK.LINKED),null!=n&&null!==(o=n.data)&&void 0!==o&&o.delegate_setting){var f,d=(null==n||null===(f=n.data)||void 0===f?void 0:f.delegate_setting).enable_delegate;localStorage.setItem(i.QU,d?a.eG.ON:a.eG.OFF)}var _=null==n||null===(u=n.data)||void 0===u||null===(l=u.linked_users)||void 0===l?void 0:l.find((function(e){var n,t;return(null===(n=e.user)||void 0===n?void 0:n.id_str)===(null==P||null===(t=P.user)||void 0===t?void 0:t.id_str)}));_&&T(_.user_position),m.F.info("\u8fde\u7ebf\u6210\u529f",O.root)}return 0===r?Promise.resolve(n):(s.Z.error("\u52a0\u5165\u8fde\u9ea6\u623f\u95f4\u5931\u8d25",n,t),Promise.reject(n))}))}),[L,y,T,P,O]),x=v.useCallback((function(e){var n;return(0,o.VV)({room_id:L,sec_to_user_id:e||(null==C||null===(n=C.user)||void 0===n?void 0:n.sec_uid)||"",silence_type:l.av.SILENCE_TYPE_NORMAL}).then((function(e){var n,t=e.data,r=e.logId;return 0===t.status_code?(m.F.info("\u9759\u97f3\u6210\u529f"),Promise.resolve(t)):(s.Z.error("\u9759\u97f3\u5931\u8d25",t,r),m.F.info((null==t||null===(n=t.data)||void 0===n?void 0:n.prompts)||"\u7533\u8bf7\u9759\u97f3\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root),Promise.reject(t))}))}),[L,C,O]),M=v.useCallback((function(e){var n;return(0,o.AE)({room_id:L,sec_to_user_id:e||(null==C||null===(n=C.user)||void 0===n?void 0:n.sec_uid)||""}).then((function(e){var n=e.data,t=e.logId;return 0===n.status_code?(m.F.info("\u53d6\u6d88\u9759\u97f3\u6210\u529f",O.root),Promise.resolve(n)):(s.Z.error("\u53d6\u6d88\u9759\u97f3\u5931\u8d25",n,t),m.F.info("\u7533\u8bf7\u53d6\u6d88\u9759\u97f3\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root),Promise.reject(n))}))}),[L,C,O]),U=v.useCallback((function(){return(0,u.W1)(g),(0,o.oX)({room_id:L,to_position:g}).then((function(e){var n=e.data,t=e.logId;return 0===n.status_code?Promise.resolve(n):(m.F.info("\u5207\u6362\u9ea6\u4f4d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root),s.Z.error("\u5207\u6362\u9ea6\u4f4d\u5931\u8d25",n,t),Promise.reject(n))}))}),[L,g,O]);return{apply:R,leave:k,join:j,silence:x,unSilence:M,enableVideo:v.useCallback((function(e){var n;return(0,o.SR)(L,e||(null==C||null===(n=C.user)||void 0===n?void 0:n.id_str)||"").then((function(e){var n,t=e.data,r=e.logId;0!==(null==t?void 0:t.status_code)&&m.F.info((null==t||null===(n=t.data)||void 0===n?void 0:n.prompts)||"\u7533\u8bf7\u5f00\u542f\u89c6\u9891\u5931\u8d25, \u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root);return 0===(null==t?void 0:t.status_code)?Promise.resolve(t):(s.Z.error("\u5f00\u542f\u89c6\u9891\u8fde\u7ebf\u5931\u8d25",t,r),Promise.reject(t))}))}),[L,C,O]),disableVideo:v.useCallback((function(e){var n;return(0,o.cJ)(L,e||(null==C||null===(n=C.user)||void 0===n?void 0:n.id_str)||"").then((function(e){var n,t=e.data,r=e.logId;0!==(null==t?void 0:t.status_code)&&m.F.info((null==t||null===(n=t.data)||void 0===n?void 0:n.prompts)||"\u7533\u8bf7\u5173\u95ed\u89c6\u9891\u5931\u8d25, \u8bf7\u7a0d\u540e\u91cd\u8bd5",O.root);return 0===(null==t?void 0:t.status_code)?Promise.resolve(t):(s.Z.error("\u5f00\u542f\u89c6\u9891\u8fde\u7ebf\u5931\u8d25",t,r),Promise.reject(t))}))}),[L,C,O]),switchMic:U}}},82755:function(e,n,t){var r=t(52727),o=t(84333),i=t(75962),a=t(94227),s=t(98391),u=t(48569),c=t(69725),l=t(42988),f=t(90511),d=t(63456),m=t(25126);n.Z=function(){var e=(0,m.Z)(),n=e.linkmicStore,t=n.linkMicSeats,_=n.linkStatus,v=n.setSelectedPosition,p=n.setShowDevicesModal,h=n.setUserPopupCoordinate,y=n.setApplySource,E=e.roomStore.roomInfo,g=e.userStore.userInfo,b=(0,c.n)().player,N=d.useMemo((function(){return(0,f.get)(E,"roomId","")}),[E]),S=d.useMemo((function(){return(0,f.get)(E,"anchor.id_str","")}),[E]),T=d.useMemo((function(){return(0,f.get)(g,"sec_uid","")}),[g]),A=d.useMemo((function(){return(0,f.get)(g,"id_str","")}),[g]);return{onJoinRoom:d.useCallback((function(e){return function(n){if(n.stopPropagation(),u.Z.checkSystemRequirements()){if(e!==undefined)if(_===a.cK.LINKED){var o;if((null===(o=t[e].info)||void 0===o?void 0:o.status)===s.U.LinkmicPositionStatus_Locked)return void l.F.info("\u8be5\u9ea6\u4f4d\u5df2\u88ab\u4e3b\u64ad\u9501\u5b9a",null==b?void 0:b.root);v(e),h({x:n.clientX,y:n.clientY})}else v(e),y(r.JW.SEAT),p(a.xQ.APPLY)}else l.F.info("\u5f53\u524d\u6d4f\u89c8\u5668\u7248\u672c\u4e0d\u652f\u6301\uff0c\u5efa\u8bae\u4f7f\u7528\u6700\u65b0\u7248 chrome \u91cd\u8bd5",null==b?void 0:b.root)}}),[_,t,p,v,h,y]),onUserCardClick:d.useCallback((function(e){return function(n){var s,u,c,l,d;n.stopPropagation();var m=null===(s=t[e])||void 0===s?void 0:s.user;v(e);var p=(null==m||null===(u=m.user)||void 0===u?void 0:u.id_str)===S,y=(null==m||null===(c=m.user)||void 0===c?void 0:c.id_str)===g.id_str,E=r.sU.AUDIENCE;y?E=r.sU.SELF:p&&(E=r.sU.ANCHOR),(0,o.q4)((null==m||null===(l=m.user)||void 0===l?void 0:l.id_str)||"",E),(null==m||null===(d=m.user)||void 0===d?void 0:d.id_str)===g.id_str&&_===a.cK.LINKED?h({x:n.clientX,y:n.clientY}):(h(undefined),i.Z.open({uid:(0,f.get)(t[e],"user.user.id_str",""),secUid:(0,f.get)(t[e],"user.user.sec_uid",""),roomId:N,loginSecUid:T,loginUid:A,message:{},hasReport:!1},{top:n.clientY,left:n.clientX,zIndex:100},null==b?void 0:b.root))}}),[t,N,A,T,g,h,v,S,_])}}},79084:function(e,n,t){t.d(n,{$:function(){return r}});var r,o=t(25126),i=t(63456),a=t(20350),s=t(90511);!function(e){e[e.ROOM_ID_EMPTY=0]="ROOM_ID_EMPTY",e[e.LIVING_PAUSE=1]="LIVING_PAUSE",e[e.LIVING_END=2]="LIVING_END",e[e.NO_LOGIN=3]="NO_LOGIN",e[e.DEFAULT=4]="DEFAULT"}(r||(r={}));n.Z=function(){var e,n,t=(0,o.Z)(),u=t.userStore.userInfo,c=t.roomStore.roomInfo,l=c.roomId,f=void 0===l?"":l;return(0,i.useMemo)((function(){return f?(0,s.get)(c,"room.mosaic_status",0)||a.LV.PAUSE===(0,s.get)(c,"room.status")?r.LIVING_PAUSE:(0,s.get)(c,"room.status")===a.LV.END?r.LIVING_END:u.id_str?r.DEFAULT:r.NO_LOGIN:r.ROOM_ID_EMPTY}),[f,null==c||null===(e=c.room)||void 0===e?void 0:e.status,null==c||null===(n=c.room)||void 0===n?void 0:n.mosaic_status,u.id_str])}},63317:function(e,n,t){var r=t(84333),o=t(25126),i=t(85754),a=t(20350),s=t(63456),u=t(90511);n.Z=function(){var e=(0,o.Z)().roomStore.roomInfo;return(0,s.useMemo)((function(){var n,t;return i.sk?"":"web_share_link"===(null===(n=window)||void 0===n||null===(t=n.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge)?e.enter_mode===a.gE.APP?r.R5.QRCODE:r.R5.STREAM:r.FO[(0,u.get)(e,"room.stream_url.stream_orientation")]||""}),[e])}},94420:function(e,n,t){t.d(n,{Z:function(){return v}});t(49915),t(69268),t(57113),t(21646),t(13226),t(67867),t(10586),t(11204),t(31806),t(16937),t(76946),t(22582),t(40485),t(98054),t(79342),t(8984),t(2501),t(89748),t(16169);var r=t(72877),o=t(90511),i=t(84539),a=t.n(i),s=t(29741),u=t(84538);function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n,t,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void t(c)}s.done?n(u):Promise.resolve(u).then(r,o)}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var _=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"room_id_str",""),m(this,"last_rtt",-1),m(this,"cursor",0),m(this,"internal_ext",""),m(this,"msgIdSets",{}),m(this,"queue",[]),this.ee=new(a())}var n,t,i,l,_;return n=e,t=[{key:"fetch",value:(l=regeneratorRuntime.mark((function e(n){var t,i,a,s,l,f,d,m,_,v=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this.timer),e.prev=1,t=this.last_rtt,i=this.cursor,a=this.internal_ext,s=this.room_id_str,l=Date.now(),e.next=6,(0,r._)({room_id_str:s,last_rtt:t,cursor:i,internal_ext:a});case 6:return f=e.sent,d=Date.now(),e.next=10,window.ParsePbModule.parsePbData(f.data);case 10:m=e.sent,((_=(0,o.get)(m,"messages",[])).length||this.queue.length)&&(this.publish([].concat(c(this.queue),c(_))),this.queueClear()),this.last_rtt=d-l,this.cursor=m.cursor,this.internal_ext=m.internalExt,this.timer=setTimeout((function(){v.fetch(n)}),n),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),u.Z.error("\u83b7\u53d6\u6d88\u606f\u5f02\u5e38: ",e.t0),this.timer=setTimeout((function(){v.fetch(n)}),n);case 23:case"end":return e.stop()}}),e,this,[[1,19]])})),_=function(){var e=this,n=arguments;return new Promise((function(t,r){var o=l.apply(e,n);function i(e){f(o,t,r,i,a,"next",e)}function a(e){f(o,t,r,i,a,"throw",e)}i(undefined)}))},function(e){return _.apply(this,arguments)})},{key:"publish",value:function(e){var n=this;this.ee.eventNames().forEach((function(t){var r=[];e.forEach((function(e){var o=(0,s.dX)(e),i=n.msgIdSets[t];i.includes(o)||(i.push(o),i.length>100&&i.shift(),new RegExp(e.method).test(t)&&r.push(e))})),r.length&&n.ee.emit(t,r)}))}},{key:"subscribe",value:function(e,n){var t=this;return this.msgIdSets[e]=[],this.ee.on(e,n),function(){t.ee.off(e,n)}}},{key:"unsubscribe",value:function(e,n){this.ee.off(e,n)}},{key:"polling",value:function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e3;this.room_id_str=e,e&&(clearTimeout(this.timer),this.fetch(n))}},{key:"pause",value:function(){clearTimeout(this.timer)}},{key:"stop",value:function(){clearTimeout(this.timer),this.ee.removeAllListeners()}},{key:"emitter",get:function(){return this.ee}},{key:"queuePush",value:function(){var e;(e=this.queue).push.apply(e,arguments)}},{key:"queueClear",value:function(){this.queue=[]}}],t&&d(n.prototype,t),i&&d(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(),v=(new _,new _)},87395:function(e,n,t){t.r(n);t(86723);var r=t(94811),o=t(72128),i=t(51771),a=t(82755),s=t(25126),u=t(98391),c=t(17262),l=t(17696),f=t(31121),d=t(63456),m=t(64503);n.default=(0,f.Pi)((function(e){var n=e.isTheaterOn;(0,i.Z)();var t=(0,a.Z)(),f=t.onJoinRoom,_=t.onUserCardClick,v=(0,s.Z)().linkmicStore,p=v.linkMicLayout,h=v.linkMicSeats,y=d.useCallback((function(e){var n,t,r;return(0,m.jsx)(c.X,{isLock:(null===(n=h[e])||void 0===n||null===(t=n.info)||void 0===t?void 0:t.status)===u.U.LinkmicPositionStatus_Locked,user:null===(r=h[e])||void 0===r?void 0:r.user,onJoinRoom:f(e),onUserClick:_(e)})}),[f,h,_]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.Z,{}),(0,m.jsx)(r.Z,{}),(0,m.jsx)(l.S,{renderElement:y,count:Object.keys(h).length,isTheaterOn:n,layout:p})]})}))},78999:function(e,n,t){t.d(n,{Z:function(){return p}});t(40688),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(89748),t(16169),t(2501);var r=t(48349),o=t(69725),i=t(93368),a=t(71002),s=t(63456),u="d6pt+8kN",c="b3vKnWsX",l="HGKTzkPJ",f="H2DgiEev",d="_0E7dJBOD",m=t(64503);function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var p=(0,i.r)((function(e){var n=e.onSend,t=e.isLogin,i=e.isIframe,v=_(s.useState(""),2),p=v[0],h=v[1],y=s.useRef(!1),E=(0,o.n)().player,g=s.useCallback((function(e){var n=e.target.value;h(n)}),[]),b=function(){var e,n;i?(0,r.dn)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u53c2\u4e0e\u4e92\u52a8"}):(0,a.ZP)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u53c2\u4e0e\u4e92\u52a8",success:function(){window.location.reload()},next:"https://".concat(null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.host)})},N=s.useCallback((function(){if(!t)return E.exitFullscreen(),void b();p&&""!==p.trim()&&n&&n(p),h("")}),[n,t,p,E]),S=s.useCallback((function(e){"Enter"!==e.key||y.current||(e.preventDefault(),N())}),[N]),T=s.useCallback((function(){y.current=!0}),[]),A=s.useCallback((function(){y.current=!1}),[]);return t?(0,m.jsxs)("div",{className:u,children:[(0,m.jsx)("textarea",{className:c,maxLength:50,value:p,onChange:g,placeholder:"\u4e0e\u5927\u5bb6\u4e92\u52a8\u4e00\u4e0b...",onKeyDown:S,onCompositionStart:T,onCompositionEnd:A}),(0,m.jsx)("div",{className:l,onClick:N,children:"\u53d1\u9001"})]}):(0,m.jsxs)("div",{className:f,children:["\u9700\u5148",(0,m.jsx)("span",{className:d,onClick:b,children:"\u767b\u5f55"}),"\uff0c\u624d\u80fd\u5f00\u59cb\u804a\u5929"]})}))},88727:function(e,n,t){t.d(n,{Z:function(){return N}});t(69268);var r=t(32385),o=t(69431),i=t(42005),a=t(85754),s=t(25126),u=t(69725),c=t(93368),l=t(42988),f=t(34361),d=t(38387),m=t(56128),_=t.n(m),v=t(90511),p=t(31121),h=(t(63456),"sszPaBbg"),y="_4xiOmLLt",E="KrFHbfWq",g="pkFTEw5l",b=t(64503),N=(0,c.r)((0,p.Pi)((function(e){var n=e.className,t=e.isIframe,c=(0,s.Z)(),m=c.roomStore,p=m.roomInfo,N=m.setFollowStatus,S=c.userStore.userInfo,T=(0,u.n)().player;return(0,b.jsxs)("div",{className:_()(h,n),children:[(0,b.jsxs)("div",{className:y,children:[(0,b.jsx)("a",{className:"anchor-avatar-follow",href:"//".concat((0,a.ZP)().VIDEO_DOMAIN,"/user/").concat((0,v.get)(p,"anchor.sec_uid","")),target:"_blank",rel:"noreferrer",children:(0,b.jsx)(f.q,{type:"extraSmall",src:(0,v.get)(p,"anchor.avatar_thumb.url_list[0]","")})}),(0,b.jsx)("div",{className:"".concat(E," nickname"),children:(0,v.get)(p,"anchor.nickname","")})]}),(0,b.jsx)(i.ZP,{onClick:function(){return!S.id_str&&T.exitFullscreen()},channel_id:r.RN.FULL_SCREEN,className:"".concat(g," anchor-follow-btn"),size:d.qE.normal,followStatus:(0,v.get)(p,"anchor.follow_info.follow_status",o.E.INNOCENT),isLogin:Boolean((0,v.get)(S,"id_str","")),sec_user_id:(0,v.get)(S,"sec_uid",""),sec_to_user_id:(0,v.get)(p,"anchor.sec_uid",""),to_user_id:(0,v.get)(p,"anchor.id_str",""),current_room_id:(0,v.get)(p,"roomId",""),followCb:function(e){N(e),T.fullscreen&&l.F.info({text:(0,i.qZ)(e)?"\u5173\u6ce8\u6210\u529f":"\u53d6\u6d88\u5173\u6ce8\u6210\u529f",root:T.root})},isIframe:t,toast:!T.fullscreen})]})})))},25951:function(e,n,t){t.d(n,{b:function(){return p}});t(57113),t(11501),t(21646),t(13226),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984);var r=t(69725),o=t(26163),i=t(57528),a=t(20350),s=t(84538),u=t(94420),c=t(31031),l=t(16379),f=t(90511),d=t(63456),m=t(78382),_=t(25126);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}var p=function(){var e=(0,_.Z)(),n=e.roomStore.roomInfo,t=e.linkmicStore.setIsPlayModeNotSupport,p=(0,r.n)().player,h=d.useCallback((function(){s.Z.info("\u73a9\u6cd5\u9650\u5236",(0,m.ZN)(n)),t(!0)}),[t,n]),y=d.useCallback((function(e){if(100===e.code)try{var n,t=(new TextDecoder).decode(e.content),r=(0,o.K)(t);r&&r.ktv_sei&&(null==r||null===(n=r.ktv_sei)||void 0===n?void 0:n.scene)>0&&h()}catch(i){}}),[h]);d.useEffect((function(){return null==p||p.on(i.SEI_PARSED,y),function(){null==p||p.off(i.SEI_PARSED,y)}}),[p,y]);var E=d.useCallback((function(e){e.forEach((function(e){var n=e.method,t=e.payload;if(n&&t){var r=Number(window.ParsePbModule.parsePbLongNumber(t.messageType)),o=t.msgType;if("object"===v(t.msgType)&&(o=Number(window.ParsePbModule.parsePbLongNumber(t.msgType))),"WebcastGuestBattleMessage"===n&&1===o&&h(),"WebcastLinkmicTeamfightMessage"===n&&1===o&&h(),"WebcastLinkmicProfitMessage"===n&&7===o&&h(),"WebcastLinkMessage"===n&&r===c.W6.TYPE_LINKER_CHANGE_PLAY_MODE){var i,a,s=t.changePlayModeContent.changePlayModeData,u=Number(window.ParsePbModule.parsePbLongNumber(t.scene));(null!=s&&null!==(i=s.playModes)&&void 0!==i&&i.includes(13)||null!=s&&null!==(a=s.playModes)&&void 0!==a&&a.includes(4)&&8===u)&&h()}if("WebcastLinkMicMethod"===n&&(r===l.iM.TYPE_SWITCH_SCENE||r===l.iM.TYPE_TURNON)){var f=t,d=f.scene,m=f.playModes,_=void 0===m?[]:m;if("object"===v(d))8===Number(window.ParsePbModule.parsePbLongNumber(d))&&null!=_&&_.includes(4)&&h()}}}))}),[h]);return d.useEffect((function(){var e=(0,f.get)(n,"room.linker_map",{}),t=(0,f.get)(n,"room.linker_detail.linker_play_modes",[]),r=!1;(e[5]||e[8]||e[12])&&t.forEach((function(e){5!==e&&7!==e&&13!==e&&11!==e&&10!==e||(r=!0)})),e[8]&&t.includes(4)&&(r=!0),r&&h()}),[h,n]),d.useEffect((function(){return u.Z.subscribe(a.dQ.LINK,E),function(){u.Z.unsubscribe(a.dQ.LINK,E)}}),[E]),null}},44858:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(63456),o=t(69725),i=t(84333),a=t(57528);function s(){var e=(0,o.n)().player,n=(0,r.useCallback)((function(e){switch(e.action){case"switch_danmu":(0,i.nU)(!e.isOpen);break;case"switch_play_pause":(0,i.Mq)(!e.paused);break;case"change_muted":(0,i.QJ)(e.muted);break;case"switch_fullscreen":(0,i.MF)(e.fullscreen)}}),[]);return(0,r.useEffect)((function(){return e.on(a.USER_ACTION,n),function(){e.off(a.USER_ACTION,n)}}),[]),null}},3587:function(e,n,t){t.d(n,{Z:function(){return y}});t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(89748),t(16169),t(2501);var r,o,i=t(63456);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}var s,u,c=function(e){return i.createElement("svg",a({width:36,height:37,viewBox:"0 0 36 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.49 9.235A2.49 2.49 0 009 11.725v13.02a2.49 2.49 0 002.49 2.49h13.02a2.49 2.49 0 002.49-2.49v-13.02a2.49 2.49 0 00-2.49-2.49H11.49zm-.575 2.49c0-.318.257-.575.574-.575H24.51c.318 0 .575.257.575.574v13.021a.574.574 0 01-.575.575H11.49a.574.574 0 01-.575-.575v-13.02z",fill:"#fff"})),o||(o=i.createElement("path",{d:"M13 19.233a1 1 0 00-1 1v3.002a1 1 0 001 1h3.001a1 1 0 000-2h-1a1 1 0 01-1-1.001v-1a1 1 0 00-1-1zM13 17.236a1 1 0 01-1-1v-3a1 1 0 011-1.001h3.001a1 1 0 110 2h-1a1 1 0 00-1 1v1.001a1 1 0 01-1 1zM23 19.233a1 1 0 011 1v3.002a1 1 0 01-1 1h-3.001a1 1 0 010-2h1a1 1 0 001-1.001v-1a1 1 0 011-1zM23 17.236a1 1 0 001-1v-3a1 1 0 00-1-1.001h-3.001a1 1 0 100 2h1a1 1 0 011 1v1.001a1 1 0 001 1z",fill:"#fff"})))};function l(){return l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l.apply(this,arguments)}var f=function(e){return i.createElement("svg",l({width:36,height:37,viewBox:"0 0 36 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.49 9.765A2.49 2.49 0 009 12.255v13.02a2.49 2.49 0 002.49 2.49h13.02a2.49 2.49 0 002.49-2.49v-13.02a2.49 2.49 0 00-2.49-2.49H11.49zm-.575 2.49c0-.318.257-.575.574-.575h13.022c.317 0 .574.257.574.575v13.02a.574.574 0 01-.574.575H11.489a.574.574 0 01-.574-.574V12.255z",fill:"#fff"})),u||(u=i.createElement("path",{d:"M20 12.765a1 1 0 00-1 1v3.001a1 1 0 001 1h3.001a1 1 0 100-2h-1.093c-.553 0-.908-.448-.908-1v-1a1 1 0 00-1-1zM20 24.767a1 1 0 01-1-1v-3.002a1 1 0 011-1h3.001a1 1 0 010 2h-1a1 1 0 00-1 1.001v1a1 1 0 01-1 1zM16.001 12.765a1 1 0 011 1v3.001a1 1 0 01-1 1h-3a1 1 0 110-2h1a1 1 0 001-1v-1a1 1 0 011-1zM16.001 24.767a1 1 0 001-1v-3.002a1 1 0 00-1-1h-3a1 1 0 000 2h1.092c.553 0 .908.448.908 1.001v1a1 1 0 001 1z",fill:"#fff"})))},d=t(99293),m=t(69725),_=t(93368),v=t(64503);function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var y=(0,_.r)((function(e){var n=e.onSwitch,t=e.on,r=void 0!==t&&t,o=p((0,i.useState)(r),2),a=o[0],s=o[1],u=(0,m.n)().player;return(0,i.useEffect)((function(){s(r)}),[r]),(0,i.useEffect)((function(){u.usePluginHooks("pc","videoDbClick",(function(){return s((function(e){return n&&n(!e),!e})),!1}))}),[]),(0,v.jsx)(d.Z,{content:"\u7f51\u9875\u5168\u5c4f",children:(0,v.jsx)("div",{onClick:function(){var e;s(!(e=a)),n&&n(!e)},children:a?(0,v.jsx)(f,{}):(0,v.jsx)(c,{})})})}))},16902:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(72300),o=t(56128),i=t.n(o),a=(t(63456),"znEqq5PU"),s="BvP0uDRl",u=t(64503),c=function(e){var n=e.count,t=e.className,o=e.renderSVG;return(0,u.jsxs)("span",{className:i()(a,t),children:[o?o():(0,u.jsx)(r.Z,{}),(0,u.jsx)("span",{className:s,children:n||"0"})]})},l=t(93368),f="_3LIuDfuX",d="i4VA0dBJ",m="H2O8biRJ",_=t(31121),v=(0,l.r)((0,_.Pi)((function(e){var n=e.userCount,t=void 0===n?"":n,r=e.title,o=void 0===r?"":r,a=e.className;return(0,u.jsxs)("div",{className:i()(f,a),children:[(0,u.jsx)("span",{className:d,children:o}),(0,u.jsx)(c,{className:m,count:t})]})})))},10092:function(e,n,t){t.r(n);t(86723);var r=t(94811),o=t(72128),i=t(51771),a=t(82755),s=t(25126),u=t(98391),c=t(19651),l=t(17696),f=t(31121),d=t(63456),m=t(64503);n.default=(0,f.Pi)((function(e){var n=e.isTheaterOn;(0,i.Z)();var t=(0,a.Z)(),f=t.onJoinRoom,_=t.onUserCardClick,v=(0,s.Z)().linkmicStore,p=v.linkMicLayout,h=v.linkMicSeats,y=d.useCallback((function(e){var n,t,r;return(0,m.jsx)(c.W,{user:null===(n=h[e])||void 0===n?void 0:n.user,onUserClick:_(e),onJoinRoom:f(e),layout:p,isLock:(null===(t=h[e])||void 0===t||null===(r=t.info)||void 0===r?void 0:r.status)===u.U.LinkmicPositionStatus_Locked})}),[f,h,_,p]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.Z,{}),(0,m.jsx)(r.Z,{}),(0,m.jsx)(l.S,{layout:p,count:Object.keys(h).length,renderElement:y,isTheaterOn:n})]})}))},98391:function(e,n,t){t.d(n,{av:function(){return _},XC:function(){return p},U:function(){return N}});var r,o,i,a,s,u,c,l,f,d,m,_,v,p,h,y,E,g,b,N,S,T;t(31365),t(92481);!function(e){e[e.LAYOUT_UNKNOWN=0]="LAYOUT_UNKNOWN",e[e.BIG=1]="BIG",e[e.SMALL=8]="SMALL",e[e.BIG_PARTY=16]="BIG_PARTY",e[e.SHARE_VIDEO=32]="SHARE_VIDEO",e[e.KTV=64]="KTV"}(r||(r={})),function(e){e[e.AUDIENCE_TYPE_UNKNOWN=0]="AUDIENCE_TYPE_UNKNOWN",e[e.VIDEO=1]="VIDEO",e[e.AUDIO=2]="AUDIO",e[e.AVATAR=3]="AVATAR"}(o||(o={})),function(e){e[e.AUDIENCE_STATUS_UNKOWN=0]="AUDIENCE_STATUS_UNKOWN",e[e.WAITING=1]="WAITING",e[e.LINKED=2]="LINKED",e[e.FINISHED=3]="FINISHED",e[e.WAITING_AND_LINKED=4]="WAITING_AND_LINKED"}(i||(i={})),function(e){e[e.ROLE_TYPE_UNKOWN=0]="ROLE_TYPE_UNKOWN",e[e.LEADER=1]="LEADER",e[e.PLAYER=2]="PLAYER",e[e.INVITEE=3]="INVITEE"}(a||(a={})),function(e){e[e.UNSILENCE=0]="UNSILENCE",e[e.SILENCE_BY_SELF=1]="SILENCE_BY_SELF",e[e.SILENCE_BY_OWNER=2]="SILENCE_BY_OWNER",e[e.SILENCE_PASSIVE=3]="SILENCE_PASSIVE"}(s||(s={})),function(e){e[e.RT_UNKNOWN=0]="RT_UNKNOWN",e[e.RT_AGREE=1]="RT_AGREE",e[e.RT_REJECT=2]="RT_REJECT"}(u||(u={})),function(e){e[e.UpdateLinkTypeReplyType_UNKNOWN=0]="UpdateLinkTypeReplyType_UNKNOWN",e[e.UpdateLinkTypeReplyType_AGREE=1]="UpdateLinkTypeReplyType_AGREE",e[e.UpdateLinkTypeReplyType_REJECT=2]="UpdateLinkTypeReplyType_REJECT"}(c||(c={})),function(e){e[e.UNKNOWN_EMOJI_TYPE=0]="UNKNOWN_EMOJI_TYPE",e[e.OWN_EMOJI=1]="OWN_EMOJI",e[e.INTERACT_EMOJI=2]="INTERACT_EMOJI"}(l||(l={})),function(e){e[e.UNKOWN_CONTROL=0]="UNKOWN_CONTROL",e[e.LINK_COMMENT=1]="LINK_COMMENT"}(f||(f={})),function(e){e[e.EmojiCategory_UNSET=0]="EmojiCategory_UNSET",e[e.EmojiCategory_EMOJI=1]="EmojiCategory_EMOJI",e[e.EmojiCategory_AVATAR=2]="EmojiCategory_AVATAR"}(d||(d={})),function(e){e[e.RELATION_UNKNOWN=0]="RELATION_UNKNOWN",e[e.RELATION_FRIENDs=1]="RELATION_FRIENDs",e[e.RELATION_FANSCLUB=2]="RELATION_FANSCLUB",e[e.RELATION_FANS=3]="RELATION_FANS"}(m||(m={})),function(e){e[e.SILENCE_TYPE_NORMAL=0]="SILENCE_TYPE_NORMAL",e[e.SILENCE_TYPE_PASSIVE=1]="SILENCE_TYPE_PASSIVE"}(_||(_={})),function(e){e[e.SingerAction_UNKNOWN=0]="SingerAction_UNKNOWN",e[e.SingerAction_START=1]="SingerAction_START",e[e.SingerAction_FINISH=2]="SingerAction_FINISH"}(v||(v={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.SONG=1]="SONG",e[e.FASTMATCH=2]="FASTMATCH",e[e.CITY=4]="CITY",e[e.STRONG_REACH=8]="STRONG_REACH",e[e.KTV_ACTIVITY=16]="KTV_ACTIVITY"}(p||(p={})),function(e){e[e.UNKOWN=0]="UNKOWN",e[e.ENABLE_DELEGATED_TO_FRIENDS=1]="ENABLE_DELEGATED_TO_FRIENDS",e[e.ENABLE_DELEGATED_TO_FRIENDS_ACQUAINTANCE=2]="ENABLE_DELEGATED_TO_FRIENDS_ACQUAINTANCE",e[e.ENABLE_FASTMATCH_SHAKE=3]="ENABLE_FASTMATCH_SHAKE",e[e.ENABLE_FASTMATCH_ROOM_SHAKE=4]="ENABLE_FASTMATCH_ROOM_SHAKE",e[e.ALLOW_PRE_LINK_MIC=5]="ALLOW_PRE_LINK_MIC",e[e.ENABLE_SEARCH_VIDEO=6]="ENABLE_SEARCH_VIDEO",e[e.ENABLE_MIC_DRESS_BUTTON=7]="ENABLE_MIC_DRESS_BUTTON"}(h||(h={})),function(e){e[e.SETTING_UNSET=0]="SETTING_UNSET",e[e.SETTING_OPEN=1]="SETTING_OPEN",e[e.SETTING_OFF=2]="SETTING_OFF",e[e.SETTING_DELEGATED_TO_EVERYONE=50]="SETTING_DELEGATED_TO_EVERYONE"}(y||(y={})),function(e){e[e.SING_UNKNOWN=0]="SING_UNKNOWN",e[e.SING_VIDEO=1]="SING_VIDEO",e[e.SING_AUDIO=2]="SING_AUDIO",e[e.SING_AVATAR=3]="SING_AVATAR"}(E||(E={})),function(e){e[e.AUDIT_UNKNOWN=0]="AUDIT_UNKNOWN",e[e.AUDIT_PASS=1]="AUDIT_PASS",e[e.AUDIT_REJECT=2]="AUDIT_REJECT"}(g||(g={})),function(e){e[e.INIT_SOURCE_UNKNOWN=0]="INIT_SOURCE_UNKNOWN",e[e.PROACRIVE=1]="PROACRIVE",e[e.DEFAULT_PASSIVE=2]="DEFAULT_PASSIVE"}(b||(b={})),function(e){e[e.LinkmicPositionStatus_Normal=0]="LinkmicPositionStatus_Normal",e[e.LinkmicPositionStatus_Locked=1]="LinkmicPositionStatus_Locked"}(N||(N={})),function(e){e[e.LinkmicPositionVerifyStatus_UnKnown=0]="LinkmicPositionVerifyStatus_UnKnown",e[e.LinkmicPositionVerifyStatus_Auditing=1]="LinkmicPositionVerifyStatus_Auditing",e[e.LinkmicPositionVerifyStatus_UnPass=2]="LinkmicPositionVerifyStatus_UnPass",e[e.LinkmicPositionVerifyStatus_Pass=3]="LinkmicPositionVerifyStatus_Pass",e[e.LinkmicPositionVerifyStatus_Fail=4]="LinkmicPositionVerifyStatus_Fail"}(S||(S={})),function(e){e[e.BUTTON_UNKNOWN=0]="BUTTON_UNKNOWN",e[e.BUTTON_PREHEAT=1]="BUTTON_PREHEAT",e[e.BUTTON_TIMELIMIT=2]="BUTTON_TIMELIMIT",e[e.BUTTON_SHUTDOWN=3]="BUTTON_SHUTDOWN"}(T||(T={}))},2650:function(e,n,t){var r,o;t(31365),t(50655);!function(e){e[e.GameKindUnknown=0]="GameKindUnknown",e[e.Effect=1]="Effect",e[e.Wmini=2]="Wmini",e[e.Wgamex=3]="Wgamex",e[e.Cloud=4]="Cloud"}(r||(r={})),function(e){e[e.Invalid=0]="Invalid",e[e.Accept=1]="Accept",e[e.Reject=2]="Reject",e[e.Unsatisfied=3]="Unsatisfied",e[e.ResourceNotReady=4]="ResourceNotReady"}(o||(o={}));var i,a,s,u,c,l,f,d,m,_,v,p,h,y,E,g,b,N,S,T,A;t(92481);!function(e){e[e.episodePlayUnknown=0]="episodePlayUnknown",e[e.episodePlayReal=1]="episodePlayReal",e[e.episodePlayStart=2]="episodePlayStart",e[e.episodePlayHighlight0=3]="episodePlayHighlight0",e[e.episodePlayHighlightRandom=4]="episodePlayHighlightRandom"}(i||(i={})),function(e){e[e.episodePreviewUnknown=0]="episodePreviewUnknown",e[e.episodePreviewOld=1]="episodePreviewOld",e[e.episodePreviewNew=2]="episodePreviewNew",e[e.episodePreviewGeneral=3]="episodePreviewGeneral"}(a||(a={})),function(e){e[e.UndefinedSwitch=0]="UndefinedSwitch",e[e.OpenSwitch=1]="OpenSwitch",e[e.CloseSwitch=2]="CloseSwitch"}(s||(s={})),function(e){e[e.NO_RELATED=0]="NO_RELATED",e[e.ENTERTAINMENT=1]="ENTERTAINMENT",e[e.GAME=2]="GAME",e[e.ECOM=3]="ECOM",e[e.BIG_PROMOTION=4]="BIG_PROMOTION",e[e.HOT_SENTENCE=5]="HOT_SENTENCE",e[e.VS=6]="VS"}(u||(u={})),function(e){e[e.UnknownRole=0]="UnknownRole",e[e.Customer=1]="Customer",e[e.ServiceStaff=2]="ServiceStaff"}(c||(c={})),function(e){e[e.LabelUnknown=0]="LabelUnknown",e[e.SellGoods=9]="SellGoods",e[e.DrawSomething=10]="DrawSomething",e[e.AnchorSing=11]="AnchorSing",e[e.AudioLinkMic=12]="AudioLinkMic",e[e.PK=13]="PK",e[e.AudioLive=14]="AudioLive",e[e.ActivityTag=15]="ActivityTag",e[e.OfficialLive=16]="OfficialLive",e[e.OfficialChannel=17]="OfficialChannel",e[e.HotSentenceTop=18]="HotSentenceTop",e[e.HourlyRankTop=19]="HourlyRankTop",e[e.RedPackage=20]="RedPackage",e[e.Friend=21]="Friend",e[e.Following=22]="Following",e[e.OnlineAudienceTopN=23]="OnlineAudienceTopN",e[e.HourlyRegionRankTop=24]="HourlyRegionRankTop",e[e.GameLabel=25]="GameLabel",e[e.GameBackgroundDefault=26]="GameBackgroundDefault",e[e.GameBackgroundCustom=27]="GameBackgroundCustom",e[e.TCFamilyTag=28]="TCFamilyTag",e[e.AudioChatKTV=29]="AudioChatKTV",e[e.ShareVideo=30]="ShareVideo",e[e.FriendLinkMic=31]="FriendLinkMic",e[e.LuckyPacket=32]="LuckyPacket",e[e.FriendsWatching=33]="FriendsWatching",e[e.FriendsWatched=34]="FriendsWatched",e[e.FriendLinkMicKTV=35]="FriendLinkMicKTV",e[e.SameCity=36]="SameCity",e[e.NearBy=37]="NearBy",e[e.HomeTown=38]="HomeTown",e[e.ShopRankHourlyTop=39]="ShopRankHourlyTop",e[e.WatchedLiveRecently=40]="WatchedLiveRecently",e[e.Acquaintance=41]="Acquaintance",e[e.Urged=42]="Urged",e[e.Distance=43]="Distance",e[e.HourlyPopularityRankTop=44]="HourlyPopularityRankTop",e[e.PaidLive=45]="PaidLive",e[e.PaidLiveAssist=46]="PaidLiveAssist",e[e.SameCityDistance=47]="SameCityDistance",e[e.BigPromotion=48]="BigPromotion",e[e.VSLive=49]="VSLive",e[e.VSPremiere=50]="VSPremiere"}(l||(l={})),function(e){e[e.Public=0]="Public",e[e.OnlyFansCan=1]="OnlyFansCan",e[e.OnlyFriendsCan=2]="OnlyFriendsCan",e[e.SomePeopleCan=3]="SomePeopleCan",e[e.SomePeopleNotCan=4]="SomePeopleNotCan"}(f||(f={})),function(e){e[e.AcquaintanceStatusUnknown=0]="AcquaintanceStatusUnknown",e[e.AcquaintanceStatusFriend=1]="AcquaintanceStatusFriend",e[e.AcquaintanceStatusPrivate=2]="AcquaintanceStatusPrivate"}(d||(d={})),function(e){e[e.NotLiving=0]="NotLiving",e[e.Living=1]="Living",e[e.Linkmic=2]="Linkmic",e[e.VsPremiere=3]="VsPremiere",e[e.VsLive=4]="VsLive",e[e.UnionLive=5]="UnionLive"}(m||(m={})),function(e){e[e.Unknow=0]="Unknow",e[e.HundredCommittee=1]="HundredCommittee"}(_||(_={})),function(e){e[e.episodeStageUnknown=0]="episodeStageUnknown",e[e.episodeStageLive=1]="episodeStageLive",e[e.episodeStagePremiere=2]="episodeStagePremiere",e[e.episodeStageRecord=3]="episodeStageRecord"}(v||(v={})),function(e){e[e.episodeTypeUnknown=0]="episodeTypeUnknown",e[e.episodeTypeNormal=1]="episodeTypeNormal",e[e.episodeTypeFeature=2]="episodeTypeFeature"}(p||(p={})),function(e){e[e.episodeSubTypeEnumUnknown=0]="episodeSubTypeEnumUnknown",e[e.episodeSubTypeEnumNormal=1]="episodeSubTypeEnumNormal",e[e.episodeSubTypeEnumGuide=2]="episodeSubTypeEnumGuide"}(h||(h={})),function(e){e[e.episodeRecordTypeUnknown=0]="episodeRecordTypeUnknown",e[e.episodeRecordTypeNormal=1]="episodeRecordTypeNormal",e[e.episodeRecordTypeLatest=2]="episodeRecordTypeLatest",e[e.episodeRecordTypeGuide=3]="episodeRecordTypeGuide"}(y||(y={})),function(e){e[e.ToolbarDefault=0]="ToolbarDefault",e[e.ToolbarTopic=1]="ToolbarTopic",e[e.ToolbarRank=2]="ToolbarRank",e[e.ToolVSInteraction=3]="ToolVSInteraction",e[e.ToolbarCart=4]="ToolbarCart",e[e.ToolbarGift=5]="ToolbarGift",e[e.ToolbarInput=6]="ToolbarInput"}(E||(E={})),function(e){e[e.DisplayNone=0]="DisplayNone",e[e.DisplayVertical=1]="DisplayVertical",e[e.DisplayHorizontal=2]="DisplayHorizontal",e[e.DisplayAll=3]="DisplayAll"}(g||(g={})),function(e){e[e.BGTypeUnknow=0]="BGTypeUnknow",e[e.BGKTV=1]="BGKTV",e[e.BGAudio=2]="BGAudio",e[e.BGVideo=3]="BGVideo",e[e.BGVideoKTV=4]="BGVideoKTV"}(b||(b={})),function(e){e[e.episodeDefault=0]="episodeDefault",e[e.episodeAcross=1]="episodeAcross",e[e.episodeVertical=2]="episodeVertical"}(N||(N={})),function(e){e[e.UnknownTab=0]="UnknownTab",e[e.ChatTab=1]="ChatTab",e[e.RankTab=2]="RankTab",e[e.IntroTab=3]="IntroTab",e[e.FansclubTab=4]="FansclubTab",e[e.RaceSchedule=5]="RaceSchedule",e[e.CommonH5Tab=6]="CommonH5Tab",e[e.NobleList=7]="NobleList"}(S||(S={})),function(e){e[e.UnknownContainerType=0]="UnknownContainerType",e[e.Lynx=1]="Lynx",e[e.WebView=2]="WebView"}(T||(T={})),function(e){e[e.LoadImmediately=0]="LoadImmediately",e[e.LoadAfterJSB=1]="LoadAfterJSB"}(A||(A={}))},67866:function(e,n,t){t(92481),t(31365)},83936:function(e,n,t){var r;t(67866),t(31365),t(92481),t(2650);!function(e){e[e.PositionUnknown=0]="PositionUnknown",e[e.PositionAnchorAvatar=1]="PositionAnchorAvatar",e[e.PositionRoomFanTicketCount=2]="PositionRoomFanTicketCount"}(r||(r={}))},31031:function(e,n,t){t.d(n,{W6:function(){return i}});var r,o,i,a,s;t(31365),t(83936),t(5345),t(98391),t(92481),t(67866);!function(e){e[e.Scene_Unknown=0]="Scene_Unknown",e[e.Scene_PK=1]="Scene_PK",e[e.Scene_AnchorLinkmic=2]="Scene_AnchorLinkmic",e[e.Scene_VirutalPK=3]="Scene_VirutalPK",e[e.Scene_AudienceLinkmic=4]="Scene_AudienceLinkmic",e[e.Scene_AudioChatRoom=5]="Scene_AudioChatRoom",e[e.Scene_CloudGame=6]="Scene_CloudGame",e[e.Scene_AnchorMultiLinkmic=7]="Scene_AnchorMultiLinkmic",e[e.Scene_VideoChatRoom=8]="Scene_VideoChatRoom"}(r||(r={})),function(e){e[e.ChannelAction_Unknown=0]="ChannelAction_Unknown",e[e.ChannelAction_Join=1]="ChannelAction_Join",e[e.ChannelAction_Leave=2]="ChannelAction_Leave",e[e.ChannelAction_Silence=3]="ChannelAction_Silence",e[e.ChannelAction_UnSilence=4]="ChannelAction_UnSilence"}(o||(o={})),function(e){e[e.TPYE_LINKER_UNKNOWN=0]="TPYE_LINKER_UNKNOWN",e[e.TYPE_LINKER_CREATE=1]="TYPE_LINKER_CREATE",e[e.TYPE_LINKER_CLOSE=2]="TYPE_LINKER_CLOSE",e[e.TYPE_LINKER_INVITE=3]="TYPE_LINKER_INVITE",e[e.TYPE_LINKER_APPLY=4]="TYPE_LINKER_APPLY",e[e.TYPE_LINKER_REPLY=5]="TYPE_LINKER_REPLY",e[e.TPYE_LINKER_ENTER=6]="TPYE_LINKER_ENTER",e[e.TPYE_LINKER_LEAVE=7]="TPYE_LINKER_LEAVE",e[e.TYPE_LINKER_PERMIT=8]="TYPE_LINKER_PERMIT",e[e.TPYE_LINKER_CANCEL_INVITE=9]="TPYE_LINKER_CANCEL_INVITE",e[e.TYPE_LINKER_WAITING_LIST_CHANGE=10]="TYPE_LINKER_WAITING_LIST_CHANGE",e[e.TYPE_LINKER_LINKED_LIST_CHANGE=11]="TYPE_LINKER_LINKED_LIST_CHANGE",e[e.TYPE_LINKER_UPDATE_USER=12]="TYPE_LINKER_UPDATE_USER",e[e.TPYE_LINKER_KICK_OUT=13]="TPYE_LINKER_KICK_OUT",e[e.TPYE_LINKER_CANCEL_APPLY=14]="TPYE_LINKER_CANCEL_APPLY",e[e.TYPE_LINKER_BAN=15]="TYPE_LINKER_BAN",e[e.TYPE_LINKER_DISPATCH_ITEM=16]="TYPE_LINKER_DISPATCH_ITEM",e[e.TYPE_LINKER_VIOLATION_REMINDER=17]="TYPE_LINKER_VIOLATION_REMINDER",e[e.TYPE_LINKER_UPDATE_LINK_TYPE_APPLY=18]="TYPE_LINKER_UPDATE_LINK_TYPE_APPLY",e[e.TYPE_LINKER_UPDATE_LINK_TYPE_REPLY=19]="TYPE_LINKER_UPDATE_LINK_TYPE_REPLY",e[e.TYPE_LINKER_AVATAR_AUDIT=20]="TYPE_LINKER_AVATAR_AUDIT",e[e.TYPE_APPlY_EXPIRED=22]="TYPE_APPlY_EXPIRED",e[e.TYPE_APPLY_STRONG_REMINDER=23]="TYPE_APPLY_STRONG_REMINDER",e[e.TYPE_ANCHOR_STREAM_SWITCH=24]="TYPE_ANCHOR_STREAM_SWITCH",e[e.TYPE_LINKER_CLICK_SCREEN=25]="TYPE_LINKER_CLICK_SCREEN",e[e.TYPE_LINKER_LOCK_POSITION=26]="TYPE_LINKER_LOCK_POSITION",e[e.TYPE_LINKER_FOLLOW_STRONG_GUIDE=27]="TYPE_LINKER_FOLLOW_STRONG_GUIDE",e[e.TYPE_LINKER_SHARE_VIDEO_IM=28]="TYPE_LINKER_SHARE_VIDEO_IM",e[e.TYPE_GUEST_INVITE=29]="TYPE_GUEST_INVITE",e[e.TYPE_GUEST_EXIT_CAST_SCREEN=30]="TYPE_GUEST_EXIT_CAST_SCREEN",e[e.TYPE_LINKER_SWITCH_SCENE=31]="TYPE_LINKER_SWITCH_SCENE",e[e.TYPE_LINK_PHASEINFO=32]="TYPE_LINK_PHASEINFO",e[e.TYPE_LINKER_CHANGE_PLAY_MODE=33]="TYPE_LINKER_CHANGE_PLAY_MODE",e[e.TYPE_LOW_BALANCE_FOR_PAID_LINKMIC=34]="TYPE_LOW_BALANCE_FOR_PAID_LINKMIC",e[e.TYPE_DEGRADE_ALERT=35]="TYPE_DEGRADE_ALERT",e[e.TPYE_LINKER_SYS_KICK_OUT=101]="TPYE_LINKER_SYS_KICK_OUT"}(i||(i={})),function(e){e[e.UnknownUserType=0]="UnknownUserType",e[e.Anchor=1]="Anchor",e[e.Guest=2]="Guest",e[e.Audience=3]="Audience"}(a||(a={})),function(e){e[e.PushType_Normal=0]="PushType_Normal",e[e.PushType_Time=1]="PushType_Time"}(s||(s={}))},16379:function(e,n,t){t.d(n,{iM:function(){return P}});var r,o,i,a;t(92481),t(31365),t(83936),t(98391),t(59703),t(5345);!function(e){e[e.BattleStarActivityGradeEnumUnknwon=0]="BattleStarActivityGradeEnumUnknwon",e[e.BattleStarActivityGradeEnumPrimary=1]="BattleStarActivityGradeEnumPrimary",e[e.BattleStarActivityGradeEnumPotential=2]="BattleStarActivityGradeEnumPotential",e[e.BattleStarActivityGradeEnumStrength=3]="BattleStarActivityGradeEnumStrength",e[e.BattleStarActivityGradeEnumElite=4]="BattleStarActivityGradeEnumElite",e[e.BattleStarActivityGradeEnumMaster=5]="BattleStarActivityGradeEnumMaster",e[e.BattleStarActivityGradeEnumPeak=6]="BattleStarActivityGradeEnumPeak"}(r||(r={})),function(e){e[e.BattleBuffUndefined=0]="BattleBuffUndefined",e[e.BattleBuffBonusCard=1]="BattleBuffBonusCard"}(o||(o={})),function(e){e[e.BattleStarActivityRankListTabUnknown=0]="BattleStarActivityRankListTabUnknown",e[e.BattleStarActivityRankListTabTotal=1]="BattleStarActivityRankListTabTotal",e[e.BattleStarActivityRankListTabDaily=2]="BattleStarActivityRankListTabDaily",e[e.BattleStarActivityRankListTabPeak=3]="BattleStarActivityRankListTabPeak"}(i||(i={})),function(e){e[e.StarActivityAwardStatus_Display=0]="StarActivityAwardStatus_Display",e[e.StarActivityAwardStatus_ToObtain=1]="StarActivityAwardStatus_ToObtain",e[e.StarActivityAwardStatus_Obtained=2]="StarActivityAwardStatus_Obtained",e[e.StarActivityAwardStatus_NotStarted=3]="StarActivityAwardStatus_NotStarted"}(a||(a={}));var s,u,c,l,f,d,m,_,v,p,h,y,E,g,b,N,S,T,A,I,P;t(2650),t(67866);!function(e){e[e.Battle_Type_Default=0]="Battle_Type_Default",e[e.Battle_Type_MultiLinkMic=1]="Battle_Type_MultiLinkMic"}(s||(s={})),function(e){e[e.TypeUndefinedCard=0]="TypeUndefinedCard",e[e.TypeMystery=1]="TypeMystery",e[e.TypeEffect=2]="TypeEffect"}(u||(u={})),function(e){e[e.PlayTypeUndefined=0]="PlayTypeUndefined",e[e.PlayUserCount=1]="PlayUserCount",e[e.PlayPKValue=2]="PlayPKValue",e[e.PlayLikeValue=3]="PlayLikeValue"}(c||(c={})),function(e){e[e.StatusUndefined=0]="StatusUndefined",e[e.NotObtained=1]="NotObtained",e[e.ObtainedNotUse=2]="ObtainedNotUse",e[e.Using=3]="Using",e[e.Used=4]="Used"}(l||(l={})),function(e){e[e.Optimize_Version_Default=0]="Optimize_Version_Default",e[e.Optimize_Version_FINISH_PUSH_MSG=1]="Optimize_Version_FINISH_PUSH_MSG"}(f||(f={})),function(e){e[e.InputUndefined=0]="InputUndefined",e[e.InputRadio=1]="InputRadio",e[e.InputCheckBox=2]="InputCheckBox",e[e.InputText=3]="InputText"}(d||(d={})),function(e){e[e.BattleFeedBackTypeUndefined=0]="BattleFeedBackTypeUndefined",e[e.BattleFeedBackTypeBase=1]="BattleFeedBackTypeBase",e[e.BattleFeedBackTypeDisLike=2]="BattleFeedBackTypeDisLike",e[e.BattleFeedBackTypeEffectNotGood=3]="BattleFeedBackTypeEffectNotGood",e[e.BattleFeedBackTypeReport=4]="BattleFeedBackTypeReport"}(m||(m={})),function(e){e[e.Normal=0]="Normal",e[e.Game=1]="Game",e[e.BattleConfigMode_OperationalPlay=2]="BattleConfigMode_OperationalPlay"}(_||(_={})),function(e){e[e.BattleResultUndefined=0]="BattleResultUndefined",e[e.BattleResultWin=1]="BattleResultWin",e[e.BattleResultLose=2]="BattleResultLose",e[e.BattleResultDraw=3]="BattleResultDraw"}(v||(v={})),function(e){e[e.PKUserRoleUknown=0]="PKUserRoleUknown",e[e.PKUserRoleGeneralPlayer=1]="PKUserRoleGeneralPlayer",e[e.PKUserRoleLeaderPlayer=2]="PKUserRoleLeaderPlayer",e[e.PKUserRoleGeneralAudience=3]="PKUserRoleGeneralAudience",e[e.PKUserRoleLeaderAudience=4]="PKUserRoleLeaderAudience"}(p||(p={})),function(e){e[e.PKUnCompute=0]="PKUnCompute",e[e.PKVictory=1]="PKVictory",e[e.PKFail=2]="PKFail",e[e.PKTie=3]="PKTie"}(h||(h={})),function(e){e[e.BattleSkinDefault=0]="BattleSkinDefault",e[e.BattleSkinHourlyRank=1]="BattleSkinHourlyRank",e[e.BattleSkinOperatingActivity=2]="BattleSkinOperatingActivity",e[e.BattleSkinStarActivityNormal=3]="BattleSkinStarActivityNormal",e[e.BattleSkinStarActivityPeak=4]="BattleSkinStarActivityPeak",e[e.BattleSkinTeamCoach=5]="BattleSkinTeamCoach",e[e.BattleSkinPopularityRank=6]="BattleSkinPopularityRank",e[e.BattleSkinACActivity=7]="BattleSkinACActivity",e[e.BattleSkinACKoi=8]="BattleSkinACKoi"}(y||(y={})),function(e){e[e.OperationalPlayType_Unknwon=0]="OperationalPlayType_Unknwon",e[e.OperationalPlayType_Unknwon1=1]="OperationalPlayType_Unknwon1",e[e.OperationalPlayType_MultipleMatches3=2]="OperationalPlayType_MultipleMatches3"}(E||(E={})),function(e){e[e.BattleInviteType_Unknown=0]="BattleInviteType_Unknown",e[e.BattleInviteType_Again=1]="BattleInviteType_Again",e[e.BattleInviteType_MultipleMatches3=2]="BattleInviteType_MultipleMatches3"}(g||(g={})),function(e){e[e.BattleEndReason_TimeUp=0]="BattleEndReason_TimeUp",e[e.BattleEndReason_CutShort=1]="BattleEndReason_CutShort",e[e.BattleEndReason_ModeWin=2]="BattleEndReason_ModeWin",e[e.BattleEndReason_StartPKGame=3]="BattleEndReason_StartPKGame",e[e.BattleEndReason_InBattleRestart=4]="BattleEndReason_InBattleRestart",e[e.BattleEndReason_MultipleMatches3=5]="BattleEndReason_MultipleMatches3",e[e.BattleEndReason_TeamTaskInstantKill=6]="BattleEndReason_TeamTaskInstantKill",e[e.BattleEndReason_ScoreControl=7]="BattleEndReason_ScoreControl",e[e.BattleEndReason_RivalRTCUnlink=8]="BattleEndReason_RivalRTCUnlink"}(b||(b={})),function(e){e[e.LinkmicTeamfightTeamID_NONE=0]="LinkmicTeamfightTeamID_NONE",e[e.LinkmicTeamfightTeamID_RED_TEAM=1]="LinkmicTeamfightTeamID_RED_TEAM",e[e.LinkmicTeamfightTeamID_BLUE_TEAM=2]="LinkmicTeamfightTeamID_BLUE_TEAM"}(N||(N={})),function(e){e[e.LinkmicTeamfightType_NONE=0]="LinkmicTeamfightType_NONE",e[e.LinkmicTeamfightType_TWO_TEAM=1]="LinkmicTeamfightType_TWO_TEAM"}(S||(S={})),function(e){e[e.LinkmicTeamfightStatus_NONE=0]="LinkmicTeamfightStatus_NONE",e[e.LinkmicTeamfightStatus_PREPARE=1]="LinkmicTeamfightStatus_PREPARE",e[e.LinkmicTeamfightStatus_PLAYING=2]="LinkmicTeamfightStatus_PLAYING",e[e.LinkmicTeamfightStatus_PUNISHING=3]="LinkmicTeamfightStatus_PUNISHING",e[e.LinkmicTeamfightStatus_FINISHED=4]="LinkmicTeamfightStatus_FINISHED"}(T||(T={})),function(e){e[e.FinishTeamfightReason_UNKNOWN=0]="FinishTeamfightReason_UNKNOWN",e[e.FinishTeamfightReason_NORMAL=1]="FinishTeamfightReason_NORMAL",e[e.FinishTeamfightReason_CUT_SHORT=2]="FinishTeamfightReason_CUT_SHORT",e[e.FinishTeamfightReason_FALLBACK=3]="FinishTeamfightReason_FALLBACK",e[e.FinishTeamfightReason_SCENE_CHANGE=4]="FinishTeamfightReason_SCENE_CHANGE",e[e.FinishTeamfightReason_COND_LIMIT=5]="FinishTeamfightReason_COND_LIMIT",e[e.FinishTeamfightReason_LINKMIC_CLOSE=6]="FinishTeamfightReason_LINKMIC_CLOSE",e[e.FinishTeamfightReason_LIVE_CLOSE=7]="FinishTeamfightReason_LIVE_CLOSE"}(A||(A={})),function(e){e[e.LinkmicTeamfightPKBarStyle_NONE=0]="LinkmicTeamfightPKBarStyle_NONE",e[e.LinkmicTeamfightPKBarStyle_NORMAL=1]="LinkmicTeamfightPKBarStyle_NORMAL",e[e.LinkmicTeamfightPKBarStyle_PK_DIFF=2]="LinkmicTeamfightPKBarStyle_PK_DIFF"}(I||(I={})),function(e){e[e.TYPE_NONE=0]="TYPE_NONE",e[e.TYPE_TURNON=1]="TYPE_TURNON",e[e.TYPE_PERMIT=2]="TYPE_PERMIT",e[e.TYPE_KICKOUTED=3]="TYPE_KICKOUTED",e[e.TYPE_FINISH=4]="TYPE_FINISH",e[e.TYPE_WAITING_LIST_CHANGED=5]="TYPE_WAITING_LIST_CHANGED",e[e.TYPE_LINKED_LIST_CHANGED=6]="TYPE_LINKED_LIST_CHANGED",e[e.TYPE_ALL_LIST_CHANGED=7]="TYPE_ALL_LIST_CHANGED",e[e.TYPE_FAN_TICKET_CHANGED=8]="TYPE_FAN_TICKET_CHANGED",e[e.TYPE_RANKING_UPDATE=9]="TYPE_RANKING_UPDATE",e[e.TYPE_SILENCE=10]="TYPE_SILENCE",e[e.TYPE_UNSILENCE=11]="TYPE_UNSILENCE",e[e.TYPE_INVITE=12]="TYPE_INVITE",e[e.TYPE_REPLY=13]="TYPE_REPLY",e[e.TYPE_AUTO_JOIN=14]="TYPE_AUTO_JOIN",e[e.TYPE_AGREE_ADMIN_FIRST_INVITE=15]="TYPE_AGREE_ADMIN_FIRST_INVITE",e[e.TYPE_SILENCE_PASSIVE=16]="TYPE_SILENCE_PASSIVE",e[e.TYPE_SWITCH_SCENE=17]="TYPE_SWITCH_SCENE"}(P||(P={}))},63737:function(e,n,t){t.d(n,{ZP:function(){return B}});t(93558),t(21646),t(13226),t(11501),t(69268),t(10586),t(96427),t(40688),t(97320),t(89748),t(76946),t(22582),t(31806),t(40485),t(98054),t(79342),t(8984),t(16169),t(2501),t(86723),t(7791),t(57113),t(18418);var r=t(63456),o=t(64503);var i,a=function(e){var n=e.content;return(0,o.jsx)("div",{className:"webcast-chatroom__room-message",children:n})};function s(e){var n=e.user;return(0,o.jsx)("span",{className:"webcast-chatroom___badge",children:n.badgeImageList.map((function(e,n){var t=e.imageType===i.FANS_CLUB&&e.content;return(0,o.jsxs)("div",{className:"webcast-chatroom___badge-item",children:[(0,o.jsx)("img",{alt:"",src:e.urlList[0],className:"badge-image",height:20}),t&&(0,o.jsx)("span",{className:"webcast-chatroom___fans-club-name",style:{color:e.content.fontColor},children:e.content.name})]},n)}))})}!function(e){e[e.ADMIN=3]="ADMIN",e[e.HONOR=1]="HONOR",e[e.FANS_CLUB=7]="FANS_CLUB"}(i||(i={}));var u=t(5819),c=t(59710);var l=function(e){var n=e.content,t=e.user,i=(0,r.useContext)(u.Z),a=i.display,l=i.map;return(0,o.jsxs)("div",{className:"webcast-chatroom__chat-message",children:[(0,o.jsx)(s,{user:t}),(0,o.jsxs)("span",{className:"webcast-chatroom__nickname",children:[t.nickname,"\uff1a"]}),(0,o.jsx)("span",{className:"webcast-chatroom__content",children:a?(0,o.jsx)(c.Z,{content:n,reflex:l}):n})]})},f=(t(59444),t(56128)),d=t.n(f);function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var v,p="string",h="user",y="pref",E="live_doodle_gift_send_message_to_anchor";function g(e){var n=e.displayText,t=n.pieces,r=n.defaultPattern.split(/{(\d:.*?)}/);return(0,o.jsx)("span",{className:d()("webcast-chatroom___display-text",{"webcast-chatroom___doodle-gift":n.key===E}),children:r.map((function(e,r){var i,a;if(!/\d:.*?/.test(e))return(0,o.jsx)("span",{children:e},r);var s=m(e.split(":"),2),u=s[0];switch(s[1]){case h:return n.key===E?(0,o.jsxs)("span",{className:"webcast-chatroom___nickname",children:[t[u].userValue.user.nickname,"\uff1a"]},r):(0,o.jsx)("span",{className:"webcast-chatroom___nickname",children:t[u].userValue.user.nickname},r);case p:return(0,o.jsx)("span",{children:null===(i=t[u])||void 0===i?void 0:i.stringValue},r);case y:return(0,o.jsxs)("span",{className:"webcast-chatroom___pref-blue",children:["\xa0",null===(a=t[u])||void 0===a?void 0:a.defaultPattern,"\xa0"]},r);default:return""}}))})}!function(e){e[e.ACTION_ENTER=1]="ACTION_ENTER",e[e.ACTION_LEAVE=2]="ACTION_LEAVE",e[e.ACTION_SET_SILENCE=3]="ACTION_SET_SILENCE",e[e.ACTION_CANCEL_SILENCE=4]="ACTION_CANCEL_SILENCE",e[e.ACTION_SET_ADMIN=5]="ACTION_SET_ADMIN",e[e.ACTION_CANCEL_ADMIN=6]="ACTION_CANCEL_ADMIN",e[e.ACTION_KICK_OUT=7]="ACTION_KICK_OUT",e[e.ACTION_SHARE=8]="ACTION_SHARE",e[e.ACTION_BLOCK=11]="ACTION_BLOCK",e[e.ACTION_FOLLOW=20]="ACTION_FOLLOW",e[e.ACTION_SEVERE_USER_GUIDE=20]="ACTION_SEVERE_USER_GUIDE"}(v||(v={}));var b=function(e){var n=e.user,t=e.action,r=e.displayText;return v.ACTION_ENTER,t===v.ACTION_ENTER?(0,o.jsxs)("div",{className:"webcast-chatroom__member-message",children:[(0,o.jsx)(s,{user:n}),(0,o.jsx)(g,{displayText:r})]}):null};var N,S=function(e){var n=e.user;return(0,o.jsxs)("div",{className:"webcast-chatroom___like-message",children:[(0,o.jsx)(s,{user:n}),(0,o.jsxs)("span",{className:"webcast-chatroom___nickname",children:[n.nickname," "]}),(0,o.jsx)("span",{children:"\u4e3a\u4e3b\u64ad\u70b9\u8d5e\u4e86"})]})};!function(e){e[e.FOLLOW_ANCHOR=1]="FOLLOW_ANCHOR",e[e.UNFOLLOW_ANCHOR=2]="UNFOLLOW_ANCHOR",e[e.SHARE_ROOM=3]="SHARE_ROOM"}(N||(N={}));var T=function(e){var n=e.user,t=e.action;return(0,o.jsxs)("div",{className:"webcast-chatroom___social-message",children:[(0,o.jsx)(s,{user:n}),(0,o.jsxs)("span",{className:"webcast-chatroom___nickname",children:[n.nickname," "]}),(0,o.jsx)("span",{children:function(){switch(t){case N.FOLLOW_ANCHOR:return"\u5173\u6ce8\u4e86\u4e3b\u64ad";case N.UNFOLLOW_ANCHOR:return"\u53d6\u6d88\u5173\u6ce8\u4e86\u4e3b\u64ad";case N.SHARE_ROOM:return"\u5206\u4eab\u4e86\u672c\u6b21\u76f4\u64ad";default:return""}}()})]})},A=t(29741);var I,P=function(e){var n=e.user,t=e.payload,r=t.gift;return r?(0,o.jsxs)("div",{className:"webcast-chatroom___gift-message",children:[(0,o.jsx)(s,{user:n}),(0,o.jsxs)("span",{className:"webcast-chatroom___nickname",children:[n.nickname," "]}),(0,o.jsx)("span",{className:"webcast-chatroom___gift-send",children:"\u9001\u51fa\xa0"}),(0,o.jsx)("span",{className:"webcast-chatroom___gift-name",children:r.name}),(0,o.jsx)("div",{className:"webcast-chatroom___gift-icon",children:(0,o.jsx)("img",{src:r.image.urlList[0],alt:""})}),(0,o.jsxs)("span",{className:"webcast-chatroom___gift-count",children:["\xd7",Number((0,A.M9)(t.repeatCount))||1]})]}):null};!function(e){e.ROOM_MESSAGE="RoomMessage",e.WEBCAST_ROOM_MESSAGE="WebcastRoomMessage",e.WEBCAST_CHAT_MESSAGE="WebcastChatMessage",e.WEBCAST_MEMBER_MESSAGE="WebcastMemberMessage",e.WEBCAST_LIKE_MESSAGE="WebcastLikeMessage",e.WEBCAST_SOCIAL_MESSAGE="WebcastSocialMessage",e.WEBCAST_GIFT_MESSAGE="WebcastGiftMessage",e.WEBCAST_NOTICE_MESSAGE="WebcastNoticeMessage",e.WEBCAST_CONTROL_MESSAGE="WebcastControlMessage",e.WEBCAST_VERIFY_MESSAGE="WebcastVerifyMessage",e.WEBCAST_ROOM_USER_SEQ_MESSAGE="WebcastRoomUserSeqMessage",e.WEBCAST_LINK_MESSAGE="WebcastLinkMessage"}(I||(I={}));var O=function(e){var n=e.message,t=e.customMessages,r=void 0===t?{}:t,i=r.WebcastChatMessage,s=r.WebcastMemberMessage,u=r.WebcastLikeMessage,c=r.WebcastSocialMessage,f=r.WebcastGiftMessage;return function(e){switch(e.method){case I.ROOM_MESSAGE:case I.WEBCAST_ROOM_MESSAGE:return(0,o.jsx)(a,{content:e.payload.content});case I.WEBCAST_CHAT_MESSAGE:return i?(0,o.jsx)(i,{message:e}):(0,o.jsx)(l,{user:e.payload.user,content:e.payload.content});case I.WEBCAST_MEMBER_MESSAGE:return s?(0,o.jsx)(s,{message:e}):(0,o.jsx)(b,{action:Number(e.payload.action),user:e.payload.user,displayText:e.payload.common.displayText});case I.WEBCAST_LIKE_MESSAGE:return u?(0,o.jsx)(u,{message:e}):(0,o.jsx)(S,{user:e.payload.user});case I.WEBCAST_SOCIAL_MESSAGE:return c?(0,o.jsx)(c,{message:e}):(0,o.jsx)(T,{user:e.payload.user,action:Number(e.payload.action)});case I.WEBCAST_GIFT_MESSAGE:return f?(0,o.jsx)(f,{message:e}):(0,o.jsx)(P,{user:e.payload.user,payload:e.payload});default:return null}}(n)};var C=function(e){var n=e.className,t=e.onEmojiClick,i=e.style,a=(0,r.useContext)(u.Z).list;return(0,o.jsx)("div",{className:d()("webcast-chatroom___emoji",n),style:i,onClick:function(e){return e.stopPropagation()},children:a.map((function(e){return e.hide?null:(0,o.jsx)("img",{onClick:function(){return t&&t(e)},draggable:"false",className:"webcast-chatroom___emoji-img",src:e.url,alt:e.display_name},e.display_name)}))})};var w=function(e){var n=e.className,t=e.count,r=e.max,i=void 0===r?99:r,a=e.style,s=e.onClick;return(0,o.jsxs)("div",{className:d()("webcast-chatroom___unread-tips",n),style:a,onClick:s,children:[t>i?"".concat(i,"+"):t," \u6761\u65b0\u6d88\u606f"]})},L=t(80535),R=t(26778),k=t(88748);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){M(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var K=(0,r.forwardRef)((function(e,n){var t,i=e.title,a=void 0===i?"\u804a\u5929\u5ba4":i,s=e.showHeader,c=void 0===s||s,l=e.enableChat,f=void 0===l||l,m=e.source,_=e.updateInterval,v=void 0===_?1e3:_,p=e.placeholder,h=e.sendBtnText,y=void 0===h?"\u53d1\u9001":h,E=e.className,g=e.width,b=e.style,S=e.height,T=e.messageContainerStyle,P=e.inputContainerStyle,j=e.inputLimit,M=e.maxCount,D=void 0===M?100:M,K=e.messageMethods,B=e.socialActions,G=e.bottomMessageMethods,Z=e.unreadTipsStyle,F=e.unreadTipsMaxCount,V=e.unreadExceedAutoUnlock,Y=void 0===V?100:V,W=e.emojiConfig,H=void 0===W?{display:!1,input:!1,map:{},list:[],icon:""}:W,q=e.inputDisabled,Q=e.onInputClick,z=e.onSend,J=e.customMessages,X=e.disableInputEnterWrap,$=void 0!==X&&X,ee=e.enableEnterSend,ne=void 0!==ee&&ee,te=e.enableAnimation,re=void 0===te||te,oe=e.autoInputValTrim,ie=void 0===oe||oe,ae=U((0,r.useState)(0),2),se=ae[0],ue=ae[1],ce=U((0,r.useState)(0),2),le=ce[0],fe=ce[1],de=U((0,r.useState)(0),2),me=de[0],_e=de[1],ve=U((0,r.useState)(!1),2),pe=ve[0],he=ve[1],ye=U((0,r.useState)(!0),2)[1],Ee=U((0,r.useState)(""),2),ge=Ee[0],be=Ee[1],Ne=(0,r.useRef)(null),Se=(0,r.useRef)(null),Te=(0,r.useRef)(null),Ae=(0,r.useRef)(null),Ie=U((0,r.useState)(!1),2),Pe=Ie[0],Oe=Ie[1],Ce=U((0,r.useState)([]),2),we=Ce[0],Le=Ce[1],Re=U((0,r.useState)(),2),ke=Re[0],je=Re[1],xe=U((0,r.useState)(!0),2),Me=xe[0],Ue=xe[1],De=U((0,r.useState)(),2),Ke=De[0],Be=De[1],Ge=(0,r.useRef)(),Ze=(0,r.useRef)(),Fe=(0,r.useRef)(),Ve=(0,r.useRef)(),Ye=(0,r.useRef)(!1),We=(0,r.useMemo)((function(){return Se.current&&Se.current.scrollHeight>Se.current.offsetHeight}),[m]),He=(0,r.useMemo)((function(){if(!m.length)return[];var e=K||(0,A.qA)(I),n=B||(0,A.qA)(N),t=m.filter((function(n){return e.includes(n.method)}));if(e.includes(I.WEBCAST_SOCIAL_MESSAGE)&&(t=t.filter((function(e){return e.method!==I.WEBCAST_SOCIAL_MESSAGE||n.includes(Number(e.payload.action))}))),G){var r=null;t=t.filter((function(e){var n=G.includes(e.method);return n&&(r=e),!n})),r&&je(r)}return t}),[m,K,B,G]);(0,r.useEffect)((function(){if(He.length){if(!pe){var e=0,n=v/He.length>200?200:v/He.length;return Be(He.length<5?1.5*n:0),Ge.current=setInterval((function(){Le((function(n){return n.concat([He[e]])})),++e>=He.length&&clearInterval(Ge.current)}),n),function(){clearInterval(Ge.current)}}Le((function(e){return e.concat(He)}))}}),[He]);var qe=function(e){e&&(e.scrollTop=e.scrollHeight)};(0,r.useEffect)((function(){return Ze.current=setTimeout((function(){var e;pe||(Te.current.style.height="".concat(null===(e=Ae.current)||void 0===e?void 0:e.getBoundingClientRect().height,"px"),qe(Se.current))}),20),function(){clearTimeout(Ze.current)}}),[pe,we,se]);var Qe=(0,r.useCallback)((function(e){var n=e.target.scrollTop>e.target.scrollHeight-e.target.offsetHeight-20;ye((function(e){return e&&!n?(_e(le),he((function(e){return e||(clearInterval(Ge.current),clearTimeout(Ze.current)),!0}))):!e&&n&&(he(!1),_e(we.length)),n}))}),[we,le]);(0,r.useEffect)((function(){pe||(ue(we.length>D?we.length-D:0),_e(we.length)),fe(we.length)}),[we.length,pe]),(0,r.useEffect)((function(){le-me>Y&&qe(Se.current)}),[le,me]),(0,r.useEffect)((function(){Ue((function(e){return!e}))}),[ke]),(0,r.useEffect)((function(){if(Fe.current){var e=new MutationObserver((function(){var e,n=window.getComputedStyle(Fe.current).getPropertyValue("height");n!==Ve.current&&(Ve.current=n,Te.current.style.height="".concat(null===(e=Ae.current)||void 0===e?void 0:e.getBoundingClientRect().height,"px"),he(!1),qe(Se.current))}));return e.observe(Fe.current,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){e.disconnect()}}}),[Fe.current]);var ze=(0,r.useCallback)((function(e){if(Ne.current.focus(),!(j&&(ge+e.display_name).length>j)){var n=(0,A.qK)(Ne.current);Ne.current.value=ge.substring(0,n)+e.display_name+ge.substring(n),be(Ne.current.value),(0,A.Mq)(Ne.current,n+e.display_name.length)}}),[ge,j]),Je=(0,r.useCallback)((function(){z&&ge&&z(ge)}),[ge,Ne.current]),Xe=(0,r.useCallback)((function(e){var n=/\[[^\[\]\n]*?]$/,t=(0,A.qK)(Ne.current),r=ge.substring(0,t),o=n.test(r);if("Backspace"===e.key&&o){e.preventDefault(),e.stopPropagation();var i=ge.substring(0,t).replace(n,"");Ne.current.value=i+ge.substring(t),be(Ne.current.value),(0,A.Mq)(Ne.current,i.length)}else"Enter"===e.key&&($&&e.preventDefault(),Ye.current||ne&&Je())}),[ge,Ne.current]),$e=(0,r.useCallback)((function(e){be(ie?e.target.value.trim():e.target.value)}),[]);(0,r.useImperativeHandle)(n,(function(){return{clear:function(){Le([]),je(undefined),clearInterval(Ge.current)},lock:function(){Se.current.scrollTop=Se.current.scrollTop-30},unlock:function(){qe(Se.current)},inputFocus:function(){Ne.current.focus()},inputClear:function(){be(""),Ne.current.value=""},delete:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];Le((function(n){return n.filter((function(n){return!e.includes((0,A.dX)(n))}))}))}}}));var en=(0,r.useCallback)((function(){Ye.current=!0}),[]),nn=(0,r.useCallback)((function(){Ye.current=!1}),[]);return(0,o.jsxs)("div",{style:x({width:g,height:S},b),className:d()(["webcast-chatroom",E]),onClick:function(){Oe(!1)},ref:Fe,children:[c&&(0,o.jsx)("div",{className:"webcast-chatroom___header",children:a}),(0,o.jsxs)("div",{className:"webcast-chatroom___messages",style:x({},T),children:[(0,o.jsxs)("div",{className:"webcast-chatroom___list",ref:Se,onScroll:Qe,children:[(0,o.jsx)("div",{className:"webcast-chatroom___item-offset",ref:Te,children:(0,o.jsxs)("div",{className:"webcast-chatroom___items",ref:Ae,style:{minHeight:"".concat(Se.current&&Se.current.getBoundingClientRect().height-1,"px"),height:pe?"".concat(null===(t=Ae.current)||void 0===t?void 0:t.getBoundingClientRect().height,"px"):"auto"},children:[(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)(u.Z.Provider,{value:H,children:We&&re?(0,o.jsx)(L.Z,{component:null,children:we.slice(se,le).map((function(e){return(0,o.jsx)(R.Z,{timeout:Ke,classNames:{enter:"webcast-chatroom___enter",enterActive:"webcast-chatroom___enter-active",enterDone:"webcast-chatroom___enter-done"},"data-id":(0,A.dX)(e),children:(0,o.jsx)("div",{className:"webcast-chatroom___item",style:{transition:Ke?"all ".concat(Ke,"ms"):""},children:(0,o.jsx)(O,{customMessages:J,message:e})},(0,A.dX)(e))},(0,A.dX)(e))}))}):we.slice(se,le).map((function(e){return(0,o.jsx)("div",{className:"webcast-chatroom___item","data-id":(0,A.dX)(e),children:(0,o.jsx)(O,{customMessages:J,message:e})},(0,A.dX)(e))}))})}),(0,o.jsx)("div",{className:"webcast-chatroom___bottom-message",style:{backgroundColor:"transparent"},children:(0,o.jsx)(k.Z,{mode:"out-in",children:(0,o.jsx)(R.Z,{addEndListener:function(e,n){e.addEventListener("transitionend",n,!1)},classNames:"fade",timeout:{exit:5},children:(0,o.jsx)("div",{style:{backgroundColor:"transparent"},className:"webcast-chatroom___item fade","data-id":(0,A.dX)(ke),children:ke&&(0,o.jsx)(O,{customMessages:J,message:ke})})},Me?"out":"in")})})]})}),(0,o.jsx)("div",{id:"webcast-chatroom___anchor"})]}),pe&&le-me>0&&(0,o.jsx)(w,{className:"webcast-chatroom___unread",count:le-me,max:F,style:Z,onClick:function(){qe(Se.current)}})]}),f&&(0,o.jsxs)("div",{className:"webcast-chatroom___input-container",style:P,onClick:Q,children:[H.input&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{className:"webcast-chatroom___emoji-input",src:H.icon,alt:"",onClick:function(e){e.stopPropagation(),Q&&Q(),Ne.current.focus(),q||Oe(!Pe)}}),(0,o.jsx)(u.Z.Provider,{value:H,children:Pe&&(0,o.jsx)(C,{className:"webcast-chatroom___emoji-panel",onEmojiClick:ze})})]}),(0,o.jsx)("textarea",{disabled:q,style:{paddingRight:H.input?"24px":0},maxLength:j,ref:Ne,onKeyDown:Xe,className:"webcast-chatroom___textarea",onChange:$e,placeholder:p,onCompositionStart:en,onCompositionEnd:nn}),(0,o.jsx)("span",{className:"webcast-chatroom___limit",children:j?"".concat(ge.length,"/").concat(j):""}),(0,o.jsx)("button",{type:"button",className:"webcast-chatroom___send-btn",onClick:Je,style:{cursor:ge?"default":"not-allowed"},disabled:!ge,children:y})]})]})})),B=K},29741:function(e,n,t){t.d(n,{M9:function(){return s},dX:function(){return u},qA:function(){return c},qK:function(){return l},Mq:function(){return f}});t(31806),t(11204),t(11501),t(97320),t(93558),t(86723),t(57113);var r=t(88758),o=t.n(r),i=t(90511),a=t(50117);function s(e){return e?"string"==typeof e?e:"number"==typeof e?"".concat(e):o().fromBits(e.low,e.high,e.unsigned).toString():""}var u=function(e){return s((0,i.get)(e,"payload.common.msgId",(0,a.Z)()))},c=function(e){return Object.keys(e).filter((function(e){return!!isNaN(Number(e))})).map((function(n){return e[n]}))},l=function(e){var n=0;if(document.selection){e.focus();var t=document.selection.createRange();t.moveStart("character",-e.value.length),n=t.text.length}else(e.selectionStart||0===e.selectionStart)&&(n="backward"===e.selectionDirection?e.selectionStart||0:e.selectionEnd||0);return n},f=function(e,n){if(null!==e)if(e.createTextRange){var t=e.createTextRange();t.move("character",n),t.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(n,n)):e.focus()}},92534:function(e,n){n.Z={iframePlayer:"tGCJAYIg",liveTitlePlugin:"gtczkJZs",liveTitlePluginContainer:"yLDsitwf",liveAnchorFollowPlugin:"C4zYC2QM",liveCommentPlugin:"YK66ajHg",toggle_chatroom:"iKlN5YUY"}},49773:function(e,n){n.Z={livingPlayer:"ECFpInVr",liveTitlePlugin:"JtVRqNO5",liveTitlePluginContainer:"_27Gxos3w",liveAnchorFollowPlugin:"MW1Vk7dX",liveCommentPlugin:"_0Io7pNZh",hasGiftBar:"MSQgjM3r",toggle_chatroom:"_0bMuEDGe"}},46378:function(e,n){n.Z={living:"hcbcQmXS",cardRelevant:"_3zMWm4HT",flexContainer:"-a8q4PSh",container:"pgQgzInF",input_disabled:"fFxdvGgx",playerWrap:"Jf1GlewW",hasGiftBar:"Ox89VrU5",player:"O01REbtb",appOnly:"_5rhoJGCW",chatroomWrap:"ojIOhXDJ",chatroomContainer:"JC0xowvv","webcast-chatroom___list":"DPnKL1Uq",chatroomContent:"Wh+DxEZX",chatroom:"tEuiQo+G",theater:"hqONwptG",toggle_chatroom:"A+RX6DP9",iframe:"SNh17Tnl"}},13454:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAACVBMVEUAAAD///////9zeKVjAAAAA3RSTlMACQVb3osYAAAAeklEQVQoz8XQsQ3AIAwEQAeJIukzAkW2YIQUPKJkFJagZ9QQKTJ2Fyq+u4LHNq2JxX8VJa90KwUlFCXM62g2OlZNNpr6YUcXP3JKVcpAakNsQzsySXkhC5qQEy2FTtVZw/g9GbAMehJP/Sqzzi4vj9Ir5Uo0csVCS/IAJH4kRvGRNEkAAAAASUVORK5CYII="},23719:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAACVBMVEUAAAAYGBgPDw+1oIxmAAAAA3RSTlMACQQs2buOAAAAeklEQVQoz8XQsQ2AIBQE0C8JhfaOwB6MYOERSkdhCXpGVRORfyYmWnHdKy7386VPLL4rkTxpIa0kFBL+ayoWrsogWph8aTzUWo6UtQy0BoTSNGKTJgtPSiR5yLGC7s1BL+TQ1uOEVV0GRKk5td2aD/mXFxldO7eTdMkOuRck2R9qUsAAAAAASUVORK5CYII="}}]);